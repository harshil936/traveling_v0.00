import { core } from './core';
import { BreezeEnum } from './enum';
import { Validator } from './validate';
let _localTimeRegex = /.\d{3}$/;
/**
DataType is an 'Enum' containing all of the supported data types.
@dynamic
**/
export class DataType extends BreezeEnum {
    static getComparableFn(dataType) {
        if (dataType && dataType.normalize) {
            return dataType.normalize;
        }
        else if (dataType === DataType.Time) {
            // durations must be converted to compare them
            return function (value) {
                return value && core.durationToSeconds(value);
            };
        }
        else {
            // TODO: __identity
            return function (value) {
                return value;
            };
        }
    }
    /** Returns the DataType for a specified EDM type name.
    **/
    static fromEdmDataType(typeName) {
        let dt;
        let parts = typeName.split(".");
        if (parts.length > 1) {
            let simpleName = parts[1];
            if (simpleName === "image") {
                // hack
                dt = DataType.Byte;
            }
            else if (parts.length === 2) {
                dt = DataType.fromName(simpleName) || DataType.Undefined;
            }
            else {
                // enum
                // dt = DataType.Int32;
                dt = DataType.String;
            }
        }
        return dt;
    }
    /** Returns the DataType for a specified input. */
    static fromValue(val) {
        if (core.isDate(val))
            return DataType.DateTime;
        switch (typeof val) {
            case "string":
                if (core.isGuid(val))
                    return DataType.Guid;
                // the >3 below is a hack to insure that if we are inferring datatypes that
                // very short strings that are valid but unlikely ISO encoded Time's are treated as strings instead.
                else if (core.isDuration(val) && val.length > 3)
                    return DataType.Time;
                else if (core.isDateString(val))
                    return DataType.DateTime;
                return DataType.String;
            case "boolean":
                return DataType.Boolean;
            case "number":
                return DataType.Double;
        }
        return DataType.Undefined;
    }
    static parseTimeFromServer(source) {
        if (typeof source === 'string') {
            return source;
        }
        // ODATA v3 format
        if (source && source.__edmType === 'Edm.Time') {
            let seconds = Math.floor(source.ms / 1000);
            return 'PT' + seconds + 'S';
        }
        return source;
    }
    static parseDateAsUTC(source) {
        if (typeof source === 'string') {
            // convert to UTC string if no time zone specifier.
            let isLocalTime = _localTimeRegex.test(source);
            // var isLocalTime = !hasTimeZone(source);
            source = isLocalTime ? source + 'Z' : source;
        }
        source = new Date(Date.parse(source));
        return source;
    }
    /** Returns a raw value converted to the specified DataType */
    static parseRawValue(val, dataType) {
        // undefined values will be the default for most unmapped properties EXCEPT when they are set
        // in a jsonResultsAdapter ( an unusual use case).
        if (val === undefined)
            return undefined;
        if (!val)
            return val;
        if (dataType && dataType.parseRawValue) {
            val = dataType.parseRawValue(val);
        }
        return val;
    }
    /** @hidden @internal */
    // used during initialization; visible on instance for testing purposes.
    static _resetConstants() {
        DataType.constants = {
            stringPrefix: "K_",
            nextNumber: -1,
            nextNumberIncrement: -1
        };
    }
}
DataType.parseDateFromServer = (value) => DataType.parseDateAsUTC(value);
DataType.String = new DataType({
    defaultValue: "",
    parse: coerceToString,
    fmtOData: fmtString,
    getNext: getNextString
});
DataType.Int64 = new DataType({
    defaultValue: 0,
    isNumeric: true,
    isInteger: true,
    quoteJsonOData: true,
    parse: coerceToInt,
    fmtOData: makeFloatFmt("L"),
    getNext: getNextNumber
});
DataType.Int32 = new DataType({
    defaultValue: 0,
    isNumeric: true,
    isInteger: true,
    parse: coerceToInt,
    fmtOData: fmtInt,
    getNext: getNextNumber
});
DataType.Int16 = new DataType({
    defaultValue: 0,
    isNumeric: true,
    isInteger: true,
    parse: coerceToInt,
    fmtOData: fmtInt,
    getNext: getNextNumber
});
DataType.Byte = new DataType({
    defaultValue: 0,
    isNumeric: true,
    isInteger: true,
    parse: coerceToInt,
    fmtOData: fmtInt
});
DataType.Decimal = new DataType({
    defaultValue: 0,
    isNumeric: true,
    quoteJsonOData: true,
    isFloat: true,
    parse: coerceToFloat,
    fmtOData: makeFloatFmt("m"),
    getNext: getNextNumber
});
DataType.Double = new DataType({
    defaultValue: 0,
    isNumeric: true,
    isFloat: true,
    parse: coerceToFloat,
    fmtOData: makeFloatFmt("d"),
    getNext: getNextNumber
});
DataType.Single = new DataType({
    defaultValue: 0,
    isNumeric: true,
    isFloat: true,
    parse: coerceToFloat,
    fmtOData: makeFloatFmt("f"),
    getNext: getNextNumber
});
DataType.DateTime = new DataType({
    defaultValue: new Date(1900, 0, 1),
    isDate: true,
    parse: coerceToDate,
    parseRawValue: parseRawDate,
    normalize: function (value) { return value && value.getTime && value.getTime(); },
    fmtOData: fmtDateTime,
    getNext: getNextDateTime,
    getConcurrencyValue: getConcurrencyDateTime
});
DataType.DateTimeOffset = new DataType({
    defaultValue: new Date(1900, 0, 1),
    isDate: true,
    parse: coerceToDate,
    parseRawValue: parseRawDate,
    normalize: function (value) { return value && value.getTime && value.getTime(); },
    fmtOData: fmtDateTimeOffset,
    getNext: getNextDateTime,
    getConcurrencyValue: getConcurrencyDateTime
});
DataType.Time = new DataType({
    defaultValue: "PT0S",
    fmtOData: fmtTime,
    parseRawValue: DataType.parseTimeFromServer
});
DataType.Boolean = new DataType({
    defaultValue: false,
    parse: coerceToBool,
    fmtOData: fmtBoolean
});
DataType.Guid = new DataType({
    defaultValue: "00000000-0000-0000-0000-000000000000",
    parse: coerceToGuid,
    fmtOData: fmtGuid,
    getNext: getNextGuid,
    parseRawValue: function (val) { return val.toLowerCase(); },
    getConcurrencyValue: core.getUuid
});
DataType.Binary = new DataType({
    defaultValue: null,
    fmtOData: fmtBinary,
    parseRawValue: parseRawBinary
});
DataType.Undefined = new DataType({
    defaultValue: undefined,
    fmtOData: fmtUndefined
});
DataType.prototype._$typeName = "DataType";
Error['x'] = DataType._resetConstants();
Error['x'] = DataType.resolveSymbols();
Error['x'] = DataType.getSymbols().forEach((sym) => sym.validatorCtor = getValidatorCtor(sym));
// private functions;
function getValidatorCtor(dataType) {
    switch (dataType) {
        case DataType.String:
            return Validator.string;
        case DataType.Int64:
            return Validator.int64;
        case DataType.Int32:
            return Validator.int32;
        case DataType.Int16:
            return Validator.int16;
        case DataType.Decimal:
            return Validator.number;
        case DataType.Double:
            return Validator.number;
        case DataType.Single:
            return Validator.number;
        case DataType.DateTime:
            return Validator.date;
        case DataType.DateTimeOffset:
            return Validator.date;
        case DataType.Boolean:
            return Validator.bool;
        case DataType.Guid:
            return Validator.guid;
        case DataType.Byte:
            return Validator.byte;
        case DataType.Binary:
            // TODO: don't quite know how to validate this yet.
            return Validator.none;
        case DataType.Time:
            return Validator.duration;
        case DataType.Undefined:
            return Validator.none;
    }
}
function getNextString() {
    return DataType.constants.stringPrefix + getNextNumber().toString();
}
function getNextNumber() {
    let result = DataType.constants.nextNumber;
    DataType.constants.nextNumber += DataType.constants.nextNumberIncrement;
    return result;
}
function getNextGuid() {
    return core.getUuid();
}
function getNextDateTime() {
    return new Date();
}
function getConcurrencyDateTime(val) {
    // use the current datetime but insure that it is different from previous call.
    let dt = new Date();
    let dt2 = new Date();
    while (dt.getTime() === dt2.getTime()) {
        dt2 = new Date();
    }
    return dt2;
}
function coerceToString(source, sourceTypeName) {
    return (source == null) ? source : source.toString();
}
function coerceToGuid(source, sourceTypeName) {
    if (sourceTypeName === "string") {
        return source.trim().toLowerCase();
    }
    return source;
}
function coerceToInt(source, sourceTypeName) {
    if (sourceTypeName === "string") {
        let src = source.trim();
        if (src === "")
            return null;
        let val = parseInt(src, 10);
        return isNaN(val) ? source : val;
    }
    else if (sourceTypeName === "number") {
        return Math.round(source);
    }
    // do we want to coerce floats -> ints
    return source;
}
function coerceToFloat(source, sourceTypeName) {
    if (sourceTypeName === "string") {
        let src = source.trim();
        if (src === "")
            return null;
        let val = parseFloat(src);
        return isNaN(val) ? source : val;
    }
    return source;
}
function coerceToDate(source, sourceTypeName) {
    let val;
    if (sourceTypeName === "string") {
        let src = source.trim();
        if (src === "")
            return null;
        val = new Date(Date.parse(src));
        return core.isDate(val) ? val : source;
    }
    else if (sourceTypeName === "number") {
        val = new Date(source);
        return core.isDate(val) ? val : source;
    }
    return source;
}
function coerceToBool(source, sourceTypeName) {
    if (sourceTypeName === "string") {
        let src = source.trim().toLowerCase();
        if (src === "false" || src === "") {
            return false;
        }
        else if (src === "true") {
            return true;
        }
        else {
            return source;
        }
    }
    return source;
}
function fmtString(val) {
    return val == null ? null : "'" + val.replace(/'/g, "''") + "'";
}
function fmtInt(val) {
    return val == null ? null : ((typeof val === "string") ? parseInt(val, 10) : val);
}
function makeFloatFmt(fmtSuffix) {
    return function (val) {
        if (val == null)
            return null;
        if (typeof val === "string") {
            val = parseFloat(val);
        }
        return val + fmtSuffix;
    };
}
function fmtDateTime(val) {
    if (val == null)
        return null;
    try {
        return "datetime'" + val.toISOString() + "'";
    }
    catch (e) {
        throwError("'%1' is not a valid dateTime", val);
    }
}
function fmtDateTimeOffset(val) {
    if (val == null)
        return null;
    try {
        return "datetimeoffset'" + val.toISOString() + "'";
    }
    catch (e) {
        throwError("'%1' is not a valid dateTime", val);
    }
}
function fmtTime(val) {
    if (val == null)
        return null;
    if (!core.isDuration(val)) {
        throwError("'%1' is not a valid ISO 8601 duration", val);
    }
    return "time'" + val + "'";
}
function fmtGuid(val) {
    if (val == null)
        return null;
    if (!core.isGuid(val)) {
        throwError("'%1' is not a valid guid", val);
    }
    return "guid'" + val + "'";
}
function fmtBoolean(val) {
    if (val == null)
        return null;
    if (typeof val === "string") {
        return val.trim().toLowerCase() === "true";
    }
    else {
        return !!val;
    }
}
function fmtBinary(val) {
    if (val == null)
        return val;
    return "binary'" + val + "'";
}
// TODO: use __identity instead;
function fmtUndefined(val) {
    return val;
}
function throwError(msg, val) {
    msg = core.formatString(msg, val);
    throw new Error(msg);
}
function parseRawDate(val) {
    if (!core.isDate(val)) {
        val = DataType.parseDateFromServer(val);
    }
    return val;
}
function parseRawBinary(val) {
    if (val && val.$value !== undefined) {
        val = val.$value; // this will be a byte[] encoded as a string
    }
    return val;
}
//function hasTimeZone(source) {
//  var ix = source.indexOf("T");
//  var timePart = source.substring(ix+1);
//  return  timePart.indexOf("-") >= 0 || timePart.indexOf("+") >= 0 || timePart.indexOf("Z");
//}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YS10eXBlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vYnJlZXplLWNsaWVudC8iLCJzb3VyY2VzIjpbInNyYy9kYXRhLXR5cGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUM5QixPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBQ3BDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFFdkMsSUFBSSxlQUFlLEdBQUcsU0FBUyxDQUFDO0FBRWhDOzs7R0FHRztBQUNILE1BQU0sT0FBTyxRQUFTLFNBQVEsVUFBVTtJQWdMdEMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxRQUFtQjtRQUN4QyxJQUFJLFFBQVEsSUFBSSxRQUFRLENBQUMsU0FBUyxFQUFFO1lBQ2xDLE9BQU8sUUFBUSxDQUFDLFNBQVMsQ0FBQztTQUMzQjthQUFNLElBQUksUUFBUSxLQUFLLFFBQVEsQ0FBQyxJQUFJLEVBQUU7WUFDckMsOENBQThDO1lBQzlDLE9BQU8sVUFBVSxLQUFVO2dCQUN6QixPQUFPLEtBQUssSUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDaEQsQ0FBQyxDQUFDO1NBQ0g7YUFBTTtZQUNMLG1CQUFtQjtZQUNuQixPQUFPLFVBQVUsS0FBVTtnQkFDekIsT0FBTyxLQUFLLENBQUM7WUFDZixDQUFDLENBQUM7U0FDSDtJQUNILENBQUM7SUFFRDtPQUNHO0lBQ0gsTUFBTSxDQUFDLGVBQWUsQ0FBQyxRQUFnQjtRQUNyQyxJQUFJLEVBQXdCLENBQUM7UUFDN0IsSUFBSSxLQUFLLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNoQyxJQUFJLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ3BCLElBQUksVUFBVSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMxQixJQUFJLFVBQVUsS0FB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ekM7SUFDRCxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFFRCxTQUFTLGNBQWMsQ0FBQyxHQUFRO0lBQzlCLElBQUksR0FBRyxJQUFJLEdBQUcsQ0FBQyxNQUFNLEtBQUssU0FBUyxFQUFFO1FBQ25DLEdBQUcsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsNENBQTRDO0tBQy9EO0lBQ0QsT0FBTyxHQUFHLENBQUM7QUFDYixDQUFDO0FBRUQsZ0NBQWdDO0FBQ2hDLGlDQUFpQztBQUNqQywwQ0FBMEM7QUFDMUMsOEZBQThGO0FBQzlGLEdBQUciLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb3JlIH0gZnJvbSAnLi9jb3JlJztcclxuaW1wb3J0IHsgQnJlZXplRW51bSB9IGZyb20gJy4vZW51bSc7XHJcbmltcG9ydCB7IFZhbGlkYXRvciB9IGZyb20gJy4vdmFsaWRhdGUnO1xyXG5cclxubGV0IF9sb2NhbFRpbWVSZWdleCA9IC8uXFxkezN9JC87XHJcblxyXG4vKiogIFxyXG5EYXRhVHlwZSBpcyBhbiAnRW51bScgY29udGFpbmluZyBhbGwgb2YgdGhlIHN1cHBvcnRlZCBkYXRhIHR5cGVzLlxyXG5AZHluYW1pY1xyXG4qKi9cclxuZXhwb3J0IGNsYXNzIERhdGFUeXBlIGV4dGVuZHMgQnJlZXplRW51bSB7XHJcbiAgLyoqIFRoZSBkZWZhdWx0IHZhbHVlIG9mIHRoaXMgRGF0YVR5cGUuIF9fUmVhZCBPbmx5X18gKiovXHJcbiAgZGVmYXVsdFZhbHVlPzogYW55O1xyXG4gIC8qKiBXaGV0aGVyIHRoaXMgaXMgYSAnbnVtZXJpYycgRGF0YVR5cGUuIF9fUmVhZCBPbmx5X18gKiovXHJcbiAgaXNOdW1lcmljPzogYm9vbGVhbjtcclxuICAvKiogV2hldGhlciB0aGlzIGlzIGFuICdpbnRlZ2VyJyBEYXRhVHlwZS4gX19SZWFkIE9ubHlfXyAqKi9cclxuICBpc0ludGVnZXI/OiBib29sZWFuO1xyXG4gIC8qKiBXaGV0aGVyIHRvIHF1b3RlIHRoZSBqc29uIHZhbHVlIHdoZW4gZm9ybWF0dGluZyB0aGlzIERhdGFUeXBlIGZvciBPRGF0YS4gKi9cclxuICBxdW90ZUpzb25PRGF0YT86IGJvb2xlYW47XHJcbiAgLyoqIFRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiB0byBjcmVhdGUgYSBbW1ZhbGlkYXRvcl1dIHRvIGJlIHVzZWQgaW4gdmFsaWRhdGluZyBpbnN0YW5jZXMgb2YgdGhpcyBEYXRhVHlwZS4gKi9cclxuICB2YWxpZGF0b3JDdG9yPyhjb250ZXh0PzogYW55KTogVmFsaWRhdG9yO1xyXG4gIC8qKiBcclxuICBPcHRpb25hbCBmdW5jdGlvbiB0byBub3JtYWxpemUgYSBkYXRhIHZhbHVlIGZvciBjb21wYXJpc29uLCBpZiBpdHMgdmFsdWUgY2Fubm90IGJlIHVzZWQgZGlyZWN0bHkuIFxyXG4gIE5vdGUgdGhhdCB0aGlzIHdpbGwgYmUgY2FsbGVkIGVhY2ggdGltZSBhIHByb3BlcnR5IGlzIGNoYW5nZWQsIHNvIG1ha2UgaXQgZmFzdC5cclxuICBAcmV0dXJuIHZhbHVlIGFwcHJvcHJpYXRlIGZvciB0aGlzIERhdGFUeXBlXHJcbiAgKiovXHJcbiAgbm9ybWFsaXplPyh2YWx1ZTogYW55KTogYW55O1xyXG4gIC8qKlxyXG4gIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSByYXcgKHNlcnZlcikgdmFsdWUgZnJvbSBzdHJpbmcgdG8gdGhpcyBEYXRhVHlwZS5cclxuICBAcmV0dXJuIHZhbHVlIGFwcHJvcHJpYXRlIGZvciB0aGlzIERhdGFUeXBlXHJcbiAgKiovXHJcbiAgcGFyc2VSYXdWYWx1ZT8odmFsdWU6IGFueSk6IGFueTtcclxuICAvKipcclxuICBPcHRpb25hbCBmdW5jdGlvbiB0byBjb252ZXJ0IGEgdmFsdWUgZnJvbSBzdHJpbmcgdG8gdGhpcyBEYXRhVHlwZS4gIE5vdGUgdGhhdCB0aGlzIHdpbGwgYmUgY2FsbGVkIGVhY2ggdGltZSBhIHByb3BlcnR5IGlzIGNoYW5nZWQsIHNvIG1ha2UgaXQgZmFzdC5cclxuICBAcmV0dXJuIHZhbHVlIGFwcHJvcHJpYXRlIGZvciB0aGlzIERhdGFUeXBlIFxyXG4gICoqL1xyXG4gIHBhcnNlPyhzb3VyY2U6IGFueSwgc291cmNlVHlwZU5hbWU6IHN0cmluZyk6IGFueTtcclxuICAvKiogXHJcbiAgT3B0aW9uYWwgZnVuY3Rpb24gdG8gZm9ybWF0IHRoaXMgRGF0YVR5cGUgZm9yIE9EYXRhIHF1ZXJpZXMuXHJcbiAgQHJldHVybiB2YWx1ZSBhcHByb3ByaWF0ZSBmb3IgT0RhdGEgcXVlcnkgICBcclxuICAqKi9cclxuICBmbXRPRGF0YT8odmFsdWU6IGFueSk6IGFueTtcclxuICAvKiogXHJcbiAgT3B0aW9uYWwgZnVuY3Rpb24gdG8gZ2V0IHRoZSBuZXh0IHZhbHVlIGZvciBrZXkgZ2VuZXJhdGlvbiwgaWYgdGhpcyBkYXRhdHlwZSBpcyB1c2VkIGFzIGEga2V5LiAgVXNlcyBhbiBpbnRlcm5hbCB0YWJsZSBvZiBwcmV2aW91cyB2YWx1ZXMuXHJcbiAgQHJldHVybiB2YWx1ZSBhcHByb3ByaWF0ZSBmb3IgdGhpcyBEYXRhVHlwZSBcclxuICAqKi9cclxuICBnZXROZXh0PygpOiBhbnk7XHJcbiAgLyoqXHJcbiAgT3B0aW9uYWwgZnVuY3Rpb24gdG8gZ2V0IHRoZSBuZXh0IHZhbHVlIHdoZW4gdGhlIGRhdGF0eXBlIGlzIHVzZWQgYXMgYSBjb25jdXJyZW5jeSBwcm9wZXJ0eS5cclxuICBAcGFyYW0gcHJldmlvdXNWYWx1ZVxyXG4gIEByZXR1cm4gdGhlIG5leHQgY29uY3VycmVuY3kgdmFsdWUsIHdoaWNoIG1heSBiZSBhIGZ1bmN0aW9uIG9mIHRoZSBwcmV2aW91c1ZhbHVlLlxyXG4gICoqL1xyXG4gIGdldENvbmN1cnJlbmN5VmFsdWU/KHByZXZpb3VzVmFsdWU/OiBhbnkpOiBhbnk7XHJcblxyXG4gIHN0YXRpYyBwYXJzZURhdGVGcm9tU2VydmVyID0gKHZhbHVlOiBhbnkpID0+IERhdGFUeXBlLnBhcnNlRGF0ZUFzVVRDKHZhbHVlKTtcclxuICAvLyBzYW1lIGVmZmVjdCBhcyBhYm92ZSBidXQgZG9lc24ndCBnaXZlIHJpZ2h0IFRTRE9DLlxyXG4gIC8vIHN0YXRpYyBwYXJzZURhdGVGcm9tU2VydmVyID0gRGF0YVR5cGUucGFyc2VEYXRlQXNVVEM7XHJcblxyXG4gIC8qKiBAaGlkZGVuIEBpbnRlcm5hbCAqL1xyXG4gIHN0YXRpYyBjb25zdGFudHM6IHsgc3RyaW5nUHJlZml4OiBzdHJpbmcsIG5leHROdW1iZXI6IG51bWJlciwgbmV4dE51bWJlckluY3JlbWVudDogbnVtYmVyIH07XHJcblxyXG4gIHN0YXRpYyBTdHJpbmcgPSBuZXcgRGF0YVR5cGUoe1xyXG4gICAgZGVmYXVsdFZhbHVlOiBcIlwiLFxyXG4gICAgcGFyc2U6IGNvZXJjZVRvU3RyaW5nLFxyXG4gICAgZm10T0RhdGE6IGZtdFN0cmluZyxcclxuICAgIGdldE5leHQ6IGdldE5leHRTdHJpbmdcclxuICB9KTtcclxuXHJcbiAgc3RhdGljIEludDY0ID0gbmV3IERhdGFUeXBlKHtcclxuICAgIGRlZmF1bHRWYWx1ZTogMCxcclxuICAgIGlzTnVtZXJpYzogdHJ1ZSxcclxuICAgIGlzSW50ZWdlcjogdHJ1ZSxcclxuICAgIHF1b3RlSnNvbk9EYXRhOiB0cnVlLFxyXG4gICAgcGFyc2U6IGNvZXJjZVRvSW50LFxyXG4gICAgZm10T0RhdGE6IG1ha2VGbG9hdEZtdChcIkxcIiksXHJcbiAgICBnZXROZXh0OiBnZXROZXh0TnVtYmVyXHJcbiAgfSk7XHJcblxyXG4gIHN0YXRpYyBJbnQzMiA9IG5ldyBEYXRhVHlwZSh7XHJcbiAgICBkZWZhdWx0VmFsdWU6IDAsXHJcbiAgICBpc051bWVyaWM6IHRydWUsXHJcbiAgICBpc0ludGVnZXI6IHRydWUsXHJcbiAgICBwYXJzZTogY29lcmNlVG9JbnQsXHJcbiAgICBmbXRPRGF0YTogZm10SW50LFxyXG4gICAgZ2V0TmV4dDogZ2V0TmV4dE51bWJlclxyXG4gIH0pO1xyXG5cclxuICBzdGF0aWMgSW50MTYgPSBuZXcgRGF0YVR5cGUoe1xyXG4gICAgZGVmYXVsdFZhbHVlOiAwLFxyXG4gICAgaXNOdW1lcmljOiB0cnVlLFxyXG4gICAgaXNJbnRlZ2VyOiB0cnVlLFxyXG4gICAgcGFyc2U6IGNvZXJjZVRvSW50LFxyXG4gICAgZm10T0RhdGE6IGZtdEludCxcclxuICAgIGdldE5leHQ6IGdldE5leHROdW1iZXJcclxuICB9KTtcclxuXHJcbiAgc3RhdGljIEJ5dGUgPSBuZXcgRGF0YVR5cGUoe1xyXG4gICAgZGVmYXVsdFZhbHVlOiAwLFxyXG4gICAgaXNOdW1lcmljOiB0cnVlLFxyXG4gICAgaXNJbnRlZ2VyOiB0cnVlLFxyXG4gICAgcGFyc2U6IGNvZXJjZVRvSW50LFxyXG4gICAgZm10T0RhdGE6IGZtdEludFxyXG4gIH0pO1xyXG5cclxuICBzdGF0aWMgRGVjaW1hbCA9IG5ldyBEYXRhVHlwZSh7XHJcbiAgICBkZWZhdWx0VmFsdWU6IDAsXHJcbiAgICBpc051bWVyaWM6IHRydWUsXHJcbiAgICBxdW90ZUpzb25PRGF0YTogdHJ1ZSxcclxuICAgIGlzRmxvYXQ6IHRydWUsXHJcbiAgICBwYXJzZTogY29lcmNlVG9GbG9hdCxcclxuICAgIGZtdE9EYXRhOiBtYWtlRmxvYXRGbXQoXCJtXCIpLFxyXG4gICAgZ2V0TmV4dDogZ2V0TmV4dE51bWJlclxyXG4gIH0pO1xyXG5cclxuICBzdGF0aWMgRG91YmxlID0gbmV3IERhdGFUeXBlKHtcclxuICAgIGRlZmF1bHRWYWx1ZTogMCxcclxuICAgIGlzTnVtZXJpYzogdHJ1ZSxcclxuICAgIGlzRmxvYXQ6IHRydWUsXHJcbiAgICBwYXJzZTogY29lcmNlVG9GbG9hdCxcclxuICAgIGZtdE9EYXRhOiBtYWtlRmxvYXRGbXQoXCJkXCIpLFxyXG4gICAgZ2V0TmV4dDogZ2V0TmV4dE51bWJlclxyXG4gIH0pO1xyXG5cclxuICBzdGF0aWMgU2luZ2xlID0gbmV3IERhdGFUeXBlKHtcclxuICAgIGRlZmF1bHRWYWx1ZTogMCxcclxuICAgIGlzTnVtZXJpYzogdHJ1ZSxcclxuICAgIGlzRmxvYXQ6IHRydWUsXHJcbiAgICBwYXJzZTogY29lcmNlVG9GbG9hdCxcclxuICAgIGZtdE9EYXRhOiBtYWtlRmxvYXRGbXQoXCJmXCIpLFxyXG4gICAgZ2V0TmV4dDogZ2V0TmV4dE51bWJlclxyXG4gIH0pO1xyXG5cclxuICBzdGF0aWMgRGF0ZVRpbWUgPSBuZXcgRGF0YVR5cGUoe1xyXG4gICAgZGVmYXVsdFZhbHVlOiBuZXcgRGF0ZSgxOTAwLCAwLCAxKSxcclxuICAgIGlzRGF0ZTogdHJ1ZSxcclxuICAgIHBhcnNlOiBjb2VyY2VUb0RhdGUsXHJcbiAgICBwYXJzZVJhd1ZhbHVlOiBwYXJzZVJhd0RhdGUsXHJcbiAgICBub3JtYWxpemU6IGZ1bmN0aW9uICh2YWx1ZTogYW55KSB7IHJldHVybiB2YWx1ZSAmJiB2YWx1ZS5nZXRUaW1lICYmIHZhbHVlLmdldFRpbWUoKTsgfSwgLy8gZGF0ZXMgZG9uJ3QgcGVyZm9ybSBlcXVhbGl0eSBjb21wYXJpc29ucyBwcm9wZXJseVxyXG4gICAgZm10T0RhdGE6IGZtdERhdGVUaW1lLFxyXG4gICAgZ2V0TmV4dDogZ2V0TmV4dERhdGVUaW1lLFxyXG4gICAgZ2V0Q29uY3VycmVuY3lWYWx1ZTogZ2V0Q29uY3VycmVuY3lEYXRlVGltZVxyXG4gIH0pO1xyXG5cclxuICBzdGF0aWMgRGF0ZVRpbWVPZmZzZXQgPSBuZXcgRGF0YVR5cGUoe1xyXG4gICAgZGVmYXVsdFZhbHVlOiBuZXcgRGF0ZSgxOTAwLCAwLCAxKSxcclxuICAgIGlzRGF0ZTogdHJ1ZSxcclxuICAgIHBhcnNlOiBjb2VyY2VUb0RhdGUsXHJcbiAgICBwYXJzZVJhd1ZhbHVlOiBwYXJzZVJhd0RhdGUsXHJcbiAgICBub3JtYWxpemU6IGZ1bmN0aW9uICh2YWx1ZTogYW55KSB7IHJldHVybiB2YWx1ZSAmJiB2YWx1ZS5nZXRUaW1lICYmIHZhbHVlLmdldFRpbWUoKTsgfSwgLy8gZGF0ZXMgZG9uJ3QgcGVyZm9ybSBlcXVhbGl0eSBjb21wYXJpc29ucyBwcm9wZXJseVxyXG4gICAgZm10T0RhdGE6IGZtdERhdGVUaW1lT2Zmc2V0LFxyXG4gICAgZ2V0TmV4dDogZ2V0TmV4dERhdGVUaW1lLFxyXG4gICAgZ2V0Q29uY3VycmVuY3lWYWx1ZTogZ2V0Q29uY3VycmVuY3lEYXRlVGltZVxyXG4gIH0pO1xyXG5cclxuICBzdGF0aWMgVGltZSA9IG5ldyBEYXRhVHlwZSh7XHJcbiAgICBkZWZhdWx0VmFsdWU6IFwiUFQwU1wiLFxyXG4gICAgZm10T0RhdGE6IGZtdFRpbWUsXHJcbiAgICBwYXJzZVJhd1ZhbHVlOiBEYXRhVHlwZS5wYXJzZVRpbWVGcm9tU2VydmVyXHJcbiAgfSk7XHJcblxyXG4gIHN0YXRpYyBCb29sZWFuID0gbmV3IERhdGFUeXBlKHtcclxuICAgIGRlZmF1bHRWYWx1ZTogZmFsc2UsXHJcbiAgICBwYXJzZTogY29lcmNlVG9Cb29sLFxyXG4gICAgZm10T0RhdGE6IGZtdEJvb2xlYW5cclxuICB9KTtcclxuXHJcbiAgc3RhdGljIEd1aWQgPSBuZXcgRGF0YVR5cGUoe1xyXG4gICAgZGVmYXVsdFZhbHVlOiBcIjAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMFwiLFxyXG4gICAgcGFyc2U6IGNvZXJjZVRvR3VpZCxcclxuICAgIGZtdE9EYXRhOiBmbXRHdWlkLFxyXG4gICAgZ2V0TmV4dDogZ2V0TmV4dEd1aWQsXHJcbiAgICBwYXJzZVJhd1ZhbHVlOiBmdW5jdGlvbiAodmFsOiBzdHJpbmcpIHsgcmV0dXJuIHZhbC50b0xvd2VyQ2FzZSgpOyB9LFxyXG4gICAgZ2V0Q29uY3VycmVuY3lWYWx1ZTogY29yZS5nZXRVdWlkXHJcbiAgfSk7XHJcblxyXG4gIHN0YXRpYyBCaW5hcnkgPSBuZXcgRGF0YVR5cGUoe1xyXG4gICAgZGVmYXVsdFZhbHVlOiBudWxsLFxyXG4gICAgZm10T0RhdGE6IGZtdEJpbmFyeSxcclxuICAgIHBhcnNlUmF3VmFsdWU6IHBhcnNlUmF3QmluYXJ5XHJcbiAgfSk7XHJcblxyXG4gIHN0YXRpYyBVbmRlZmluZWQgPSBuZXcgRGF0YVR5cGUoe1xyXG4gICAgZGVmYXVsdFZhbHVlOiB1bmRlZmluZWQsXHJcbiAgICBmbXRPRGF0YTogZm10VW5kZWZpbmVkXHJcbiAgfSk7XHJcblxyXG4gIHN0YXRpYyBnZXRDb21wYXJhYmxlRm4oZGF0YVR5cGU/OiBEYXRhVHlwZSkge1xyXG4gICAgaWYgKGRhdGFUeXBlICYmIGRhdGFUeXBlLm5vcm1hbGl6ZSkge1xyXG4gICAgICByZXR1cm4gZGF0YVR5cGUubm9ybWFsaXplO1xyXG4gICAgfSBlbHNlIGlmIChkYXRhVHlwZSA9PT0gRGF0YVR5cGUuVGltZSkge1xyXG4gICAgICAvLyBkdXJhdGlvbnMgbXVzdCBiZSBjb252ZXJ0ZWQgdG8gY29tcGFyZSB0aGVtXHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWU6IGFueSkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSAmJiBjb3JlLmR1cmF0aW9uVG9TZWNvbmRzKHZhbHVlKTtcclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIFRPRE86IF9faWRlbnRpdHlcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqIFJldHVybnMgdGhlIERhdGFUeXBlIGZvciBhIHNwZWNpZmllZCBFRE0gdHlwZSBuYW1lLlxyXG4gICoqL1xyXG4gIHN0YXRpYyBmcm9tRWRtRGF0YVR5cGUodHlwZU5hbWU6IHN0cmluZykge1xyXG4gICAgbGV0IGR0OiBEYXRhVHlwZSB8IHVuZGVmaW5lZDtcclxuICAgIGxldCBwYXJ0cyA9IHR5cGVOYW1lLnNwbGl0KFwiLlwiKTtcclxuICAgIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIGxldCBzaW1wbGVOYW1lID0gcGFydHNbMV07XHJcbiAgICAgIGlmIChzaW1wbGVOYW1lID09PSBcImltYWdlXCIpIHtcclxuICAgICAgICAvLyBoYWNrXHJcbiAgICAgICAgZHQgPSBEYXRhVHlwZS5CeXRlO1xyXG4gICAgICB9IGVsc2UgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgIGR0ID0gRGF0YVR5cGUuZnJvbU5hbWUoc2ltcGxlTmFtZSkgfHwgRGF0YVR5cGUuVW5kZWZpbmVkO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGVudW1cclxuICAgICAgICAvLyBkdCA9IERhdGFUeXBlLkludDMyO1xyXG4gICAgICAgIGR0ID0gRGF0YVR5cGUuU3RyaW5nO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGR0O1xyXG4gIH1cclxuXHJcbiAgLyoqIFJldHVybnMgdGhlIERhdGFUeXBlIGZvciBhIHNwZWNpZmllZCBpbnB1dC4gKi9cclxuICBzdGF0aWMgZnJvbVZhbHVlKHZhbDogYW55KSB7XHJcbiAgICBpZiAoY29yZS5pc0RhdGUodmFsKSkgcmV0dXJuIERhdGFUeXBlLkRhdGVUaW1lO1xyXG4gICAgc3dpdGNoICh0eXBlb2YgdmFsKSB7XHJcbiAgICAgIGNhc2UgXCJzdHJpbmdcIjpcclxuICAgICAgICBpZiAoY29yZS5pc0d1aWQodmFsKSkgcmV0dXJuIERhdGFUeXBlLkd1aWQ7XHJcbiAgICAgICAgLy8gdGhlID4zIGJlbG93IGlzIGEgaGFjayB0byBpbnN1cmUgdGhhdCBpZiB3ZSBhcmUgaW5mZXJyaW5nIGRhdGF0eXBlcyB0aGF0XHJcbiAgICAgICAgLy8gdmVyeSBzaG9ydCBzdHJpbmdzIHRoYXQgYXJlIHZhbGlkIGJ1dCB1bmxpa2VseSBJU08gZW5jb2RlZCBUaW1lJ3MgYXJlIHRyZWF0ZWQgYXMgc3RyaW5ncyBpbnN0ZWFkLlxyXG4gICAgICAgIGVsc2UgaWYgKGNvcmUuaXNEdXJhdGlvbih2YWwpICYmIHZhbC5sZW5ndGggPiAzKSByZXR1cm4gRGF0YVR5cGUuVGltZTtcclxuICAgICAgICBlbHNlIGlmIChjb3JlLmlzRGF0ZVN0cmluZyh2YWwpKSByZXR1cm4gRGF0YVR5cGUuRGF0ZVRpbWU7XHJcbiAgICAgICAgcmV0dXJuIERhdGFUeXBlLlN0cmluZztcclxuICAgICAgY2FzZSBcImJvb2xlYW5cIjpcclxuICAgICAgICByZXR1cm4gRGF0YVR5cGUuQm9vbGVhbjtcclxuICAgICAgY2FzZSBcIm51bWJlclwiOlxyXG4gICAgICAgIHJldHVybiBEYXRhVHlwZS5Eb3VibGU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRGF0YVR5cGUuVW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHBhcnNlVGltZUZyb21TZXJ2ZXIoc291cmNlOiBhbnkpIHtcclxuICAgIGlmICh0eXBlb2Ygc291cmNlID09PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgLy8gT0RBVEEgdjMgZm9ybWF0XHJcbiAgICBpZiAoc291cmNlICYmIHNvdXJjZS5fX2VkbVR5cGUgPT09ICdFZG0uVGltZScpIHtcclxuICAgICAgbGV0IHNlY29uZHMgPSBNYXRoLmZsb29yKHNvdXJjZS5tcyAvIDEwMDApO1xyXG4gICAgICByZXR1cm4gJ1BUJyArIHNlY29uZHMgKyAnUyc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc291cmNlO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHBhcnNlRGF0ZUFzVVRDKHNvdXJjZTogYW55KSB7XHJcbiAgICBpZiAodHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgLy8gY29udmVydCB0byBVVEMgc3RyaW5nIGlmIG5vIHRpbWUgem9uZSBzcGVjaWZpZXIuXHJcbiAgICAgIGxldCBpc0xvY2FsVGltZSA9IF9sb2NhbFRpbWVSZWdleC50ZXN0KHNvdXJjZSk7XHJcbiAgICAgIC8vIHZhciBpc0xvY2FsVGltZSA9ICFoYXNUaW1lWm9uZShzb3VyY2UpO1xyXG4gICAgICBzb3VyY2UgPSBpc0xvY2FsVGltZSA/IHNvdXJjZSArICdaJyA6IHNvdXJjZTtcclxuICAgIH1cclxuICAgIHNvdXJjZSA9IG5ldyBEYXRlKERhdGUucGFyc2Uoc291cmNlKSk7XHJcbiAgICByZXR1cm4gc291cmNlO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKiBSZXR1cm5zIGEgcmF3IHZhbHVlIGNvbnZlcnRlZCB0byB0aGUgc3BlY2lmaWVkIERhdGFUeXBlICovXHJcbiAgc3RhdGljIHBhcnNlUmF3VmFsdWUodmFsOiBhbnksIGRhdGFUeXBlPzogRGF0YVR5cGUpIHtcclxuICAgIC8vIHVuZGVmaW5lZCB2YWx1ZXMgd2lsbCBiZSB0aGUgZGVmYXVsdCBmb3IgbW9zdCB1bm1hcHBlZCBwcm9wZXJ0aWVzIEVYQ0VQVCB3aGVuIHRoZXkgYXJlIHNldFxyXG4gICAgLy8gaW4gYSBqc29uUmVzdWx0c0FkYXB0ZXIgKCBhbiB1bnVzdWFsIHVzZSBjYXNlKS5cclxuICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIGlmICghdmFsKSByZXR1cm4gdmFsO1xyXG4gICAgaWYgKGRhdGFUeXBlICYmIGRhdGFUeXBlLnBhcnNlUmF3VmFsdWUpIHtcclxuICAgICAgdmFsID0gZGF0YVR5cGUucGFyc2VSYXdWYWx1ZSh2YWwpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbDtcclxuICB9XHJcblxyXG4gIC8qKiBAaGlkZGVuIEBpbnRlcm5hbCAqL1xyXG4gIC8vIHVzZWQgZHVyaW5nIGluaXRpYWxpemF0aW9uOyB2aXNpYmxlIG9uIGluc3RhbmNlIGZvciB0ZXN0aW5nIHB1cnBvc2VzLlxyXG4gIHN0YXRpYyBfcmVzZXRDb25zdGFudHMoKSB7XHJcbiAgICBEYXRhVHlwZS5jb25zdGFudHMgPSB7XHJcbiAgICAgIHN0cmluZ1ByZWZpeDogXCJLX1wiLFxyXG4gICAgICBuZXh0TnVtYmVyOiAtMSxcclxuICAgICAgbmV4dE51bWJlckluY3JlbWVudDogLTFcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvLyBOT1QgWUVUIE5FRURFRCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vIHZhciBfdXRjT2Zmc2V0TXMgPSAobmV3IERhdGUoKSkuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwO1xyXG5cclxuICAvL0RhdGFUeXBlLnBhcnNlRGF0ZUFzTG9jYWwgPSBmdW5jdGlvbiAoc291cmNlKSB7XHJcbiAgLy8gICAgdmFyIGR0ID0gRGF0YVR5cGUucGFyc2VEYXRlc0FzVVRDKHNvdXJjZSk7XHJcbiAgLy8gICAgaWYgKF9faXNEYXRlKGR0KSkge1xyXG4gIC8vICAgICAgICBkdCA9IG5ldyBEYXRlKGR0LmdldFRpbWUoKSArIF91dGNPZmZzZXRNcyk7XHJcbiAgLy8gICAgfVxyXG4gIC8vICAgIHJldHVybiBkdDtcclxuICAvL307XHJcbn1cclxuRGF0YVR5cGUucHJvdG90eXBlLl8kdHlwZU5hbWUgPSBcIkRhdGFUeXBlXCI7XHJcbkVycm9yWyd4J10gPSBEYXRhVHlwZS5fcmVzZXRDb25zdGFudHMoKTtcclxuRXJyb3JbJ3gnXSA9IERhdGFUeXBlLnJlc29sdmVTeW1ib2xzKCk7XHJcbkVycm9yWyd4J10gPSBEYXRhVHlwZS5nZXRTeW1ib2xzKCkuZm9yRWFjaCgoc3ltOiBEYXRhVHlwZSkgPT4gc3ltLnZhbGlkYXRvckN0b3IgPSBnZXRWYWxpZGF0b3JDdG9yKHN5bSkpO1xyXG5cclxuLy8gcHJpdmF0ZSBmdW5jdGlvbnM7XHJcblxyXG5cclxuZnVuY3Rpb24gZ2V0VmFsaWRhdG9yQ3RvcihkYXRhVHlwZTogRGF0YVR5cGUpIHtcclxuICBzd2l0Y2ggKGRhdGFUeXBlKSB7XHJcbiAgICBjYXNlIERhdGFUeXBlLlN0cmluZzpcclxuICAgICAgcmV0dXJuIFZhbGlkYXRvci5zdHJpbmc7XHJcbiAgICBjYXNlIERhdGFUeXBlLkludDY0OlxyXG4gICAgICByZXR1cm4gVmFsaWRhdG9yLmludDY0O1xyXG4gICAgY2FzZSBEYXRhVHlwZS5JbnQzMjpcclxuICAgICAgcmV0dXJuIFZhbGlkYXRvci5pbnQzMjtcclxuICAgIGNhc2UgRGF0YVR5cGUuSW50MTY6XHJcbiAgICAgIHJldHVybiBWYWxpZGF0b3IuaW50MTY7XHJcbiAgICBjYXNlIERhdGFUeXBlLkRlY2ltYWw6XHJcbiAgICAgIHJldHVybiBWYWxpZGF0b3IubnVtYmVyO1xyXG4gICAgY2FzZSBEYXRhVHlwZS5Eb3VibGU6XHJcbiAgICAgIHJldHVybiBWYWxpZGF0b3IubnVtYmVyO1xyXG4gICAgY2FzZSBEYXRhVHlwZS5TaW5nbGU6XHJcbiAgICAgIHJldHVybiBWYWxpZGF0b3IubnVtYmVyO1xyXG4gICAgY2FzZSBEYXRhVHlwZS5EYXRlVGltZTpcclxuICAgICAgcmV0dXJuIFZhbGlkYXRvci5kYXRlO1xyXG4gICAgY2FzZSBEYXRhVHlwZS5EYXRlVGltZU9mZnNldDpcclxuICAgICAgcmV0dXJuIFZhbGlkYXRvci5kYXRlO1xyXG4gICAgY2FzZSBEYXRhVHlwZS5Cb29sZWFuOlxyXG4gICAgICByZXR1cm4gVmFsaWRhdG9yLmJvb2w7XHJcbiAgICBjYXNlIERhdGFUeXBlLkd1aWQ6XHJcbiAgICAgIHJldHVybiBWYWxpZGF0b3IuZ3VpZDtcclxuICAgIGNhc2UgRGF0YVR5cGUuQnl0ZTpcclxuICAgICAgcmV0dXJuIFZhbGlkYXRvci5ieXRlO1xyXG4gICAgY2FzZSBEYXRhVHlwZS5CaW5hcnk6XHJcbiAgICAgIC8vIFRPRE86IGRvbid0IHF1aXRlIGtub3cgaG93IHRvIHZhbGlkYXRlIHRoaXMgeWV0LlxyXG4gICAgICByZXR1cm4gVmFsaWRhdG9yLm5vbmU7XHJcbiAgICBjYXNlIERhdGFUeXBlLlRpbWU6XHJcbiAgICAgIHJldHVybiBWYWxpZGF0b3IuZHVyYXRpb247XHJcbiAgICBjYXNlIERhdGFUeXBlLlVuZGVmaW5lZDpcclxuICAgICAgcmV0dXJuIFZhbGlkYXRvci5ub25lO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0TmV4dFN0cmluZygpIHtcclxuICByZXR1cm4gRGF0YVR5cGUuY29uc3RhbnRzLnN0cmluZ1ByZWZpeCArIGdldE5leHROdW1iZXIoKS50b1N0cmluZygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXROZXh0TnVtYmVyKCkge1xyXG4gIGxldCByZXN1bHQgPSBEYXRhVHlwZS5jb25zdGFudHMubmV4dE51bWJlcjtcclxuICBEYXRhVHlwZS5jb25zdGFudHMubmV4dE51bWJlciArPSBEYXRhVHlwZS5jb25zdGFudHMubmV4dE51bWJlckluY3JlbWVudDtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXROZXh0R3VpZCgpIHtcclxuICByZXR1cm4gY29yZS5nZXRVdWlkKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE5leHREYXRlVGltZSgpIHtcclxuICByZXR1cm4gbmV3IERhdGUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q29uY3VycmVuY3lEYXRlVGltZSh2YWw6IGFueSkge1xyXG4gIC8vIHVzZSB0aGUgY3VycmVudCBkYXRldGltZSBidXQgaW5zdXJlIHRoYXQgaXQgaXMgZGlmZmVyZW50IGZyb20gcHJldmlvdXMgY2FsbC5cclxuICBsZXQgZHQgPSBuZXcgRGF0ZSgpO1xyXG4gIGxldCBkdDIgPSBuZXcgRGF0ZSgpO1xyXG4gIHdoaWxlIChkdC5nZXRUaW1lKCkgPT09IGR0Mi5nZXRUaW1lKCkpIHtcclxuICAgIGR0MiA9IG5ldyBEYXRlKCk7XHJcbiAgfVxyXG4gIHJldHVybiBkdDI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvZXJjZVRvU3RyaW5nKHNvdXJjZTogYW55LCBzb3VyY2VUeXBlTmFtZT86IHN0cmluZykge1xyXG4gIHJldHVybiAoc291cmNlID09IG51bGwpID8gc291cmNlIDogc291cmNlLnRvU3RyaW5nKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvZXJjZVRvR3VpZChzb3VyY2U6IGFueSwgc291cmNlVHlwZU5hbWU6IHN0cmluZykge1xyXG4gIGlmIChzb3VyY2VUeXBlTmFtZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgcmV0dXJuIHNvdXJjZS50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuICB9XHJcbiAgcmV0dXJuIHNvdXJjZTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29lcmNlVG9JbnQoc291cmNlOiBhbnksIHNvdXJjZVR5cGVOYW1lOiBzdHJpbmcpIHtcclxuICBpZiAoc291cmNlVHlwZU5hbWUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgIGxldCBzcmMgPSBzb3VyY2UudHJpbSgpO1xyXG4gICAgaWYgKHNyYyA9PT0gXCJcIikgcmV0dXJuIG51bGw7XHJcbiAgICBsZXQgdmFsID0gcGFyc2VJbnQoc3JjLCAxMCk7XHJcbiAgICByZXR1cm4gaXNOYU4odmFsKSA/IHNvdXJjZSA6IHZhbDtcclxuICB9IGVsc2UgaWYgKHNvdXJjZVR5cGVOYW1lID09PSBcIm51bWJlclwiKSB7XHJcbiAgICByZXR1cm4gTWF0aC5yb3VuZChzb3VyY2UpO1xyXG4gIH1cclxuICAvLyBkbyB3ZSB3YW50IHRvIGNvZXJjZSBmbG9hdHMgLT4gaW50c1xyXG4gIHJldHVybiBzb3VyY2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvZXJjZVRvRmxvYXQoc291cmNlOiBhbnksIHNvdXJjZVR5cGVOYW1lOiBzdHJpbmcpIHtcclxuICBpZiAoc291cmNlVHlwZU5hbWUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgIGxldCBzcmMgPSBzb3VyY2UudHJpbSgpO1xyXG4gICAgaWYgKHNyYyA9PT0gXCJcIikgcmV0dXJuIG51bGw7XHJcbiAgICBsZXQgdmFsID0gcGFyc2VGbG9hdChzcmMpO1xyXG4gICAgcmV0dXJuIGlzTmFOKHZhbCkgPyBzb3VyY2UgOiB2YWw7XHJcbiAgfVxyXG4gIHJldHVybiBzb3VyY2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvZXJjZVRvRGF0ZShzb3VyY2U6IGFueSwgc291cmNlVHlwZU5hbWU6IHN0cmluZykge1xyXG4gIGxldCB2YWw6IGFueTtcclxuICBpZiAoc291cmNlVHlwZU5hbWUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgIGxldCBzcmMgPSBzb3VyY2UudHJpbSgpO1xyXG4gICAgaWYgKHNyYyA9PT0gXCJcIikgcmV0dXJuIG51bGw7XHJcbiAgICB2YWwgPSBuZXcgRGF0ZShEYXRlLnBhcnNlKHNyYykpO1xyXG4gICAgcmV0dXJuIGNvcmUuaXNEYXRlKHZhbCkgPyB2YWwgOiBzb3VyY2U7XHJcbiAgfSBlbHNlIGlmIChzb3VyY2VUeXBlTmFtZSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgdmFsID0gbmV3IERhdGUoc291cmNlKTtcclxuICAgIHJldHVybiBjb3JlLmlzRGF0ZSh2YWwpID8gdmFsIDogc291cmNlO1xyXG4gIH1cclxuICByZXR1cm4gc291cmNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjb2VyY2VUb0Jvb2woc291cmNlOiBhbnksIHNvdXJjZVR5cGVOYW1lOiBzdHJpbmcpIHtcclxuICBpZiAoc291cmNlVHlwZU5hbWUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgIGxldCBzcmMgPSBzb3VyY2UudHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAoc3JjID09PSBcImZhbHNlXCIgfHwgc3JjID09PSBcIlwiKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0gZWxzZSBpZiAoc3JjID09PSBcInRydWVcIikge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBzb3VyY2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZtdFN0cmluZyh2YWw6IGFueSkge1xyXG4gIHJldHVybiB2YWwgPT0gbnVsbCA/IG51bGwgOiBcIidcIiArIHZhbC5yZXBsYWNlKC8nL2csIFwiJydcIikgKyBcIidcIjtcclxufVxyXG5cclxuZnVuY3Rpb24gZm10SW50KHZhbDogYW55KSB7XHJcbiAgcmV0dXJuIHZhbCA9PSBudWxsID8gbnVsbCA6ICgodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIikgPyBwYXJzZUludCh2YWwsIDEwKSA6IHZhbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VGbG9hdEZtdChmbXRTdWZmaXg6IHN0cmluZykge1xyXG4gIHJldHVybiBmdW5jdGlvbiAodmFsOiBhbnkpIHtcclxuICAgIGlmICh2YWwgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICBpZiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICB2YWwgPSBwYXJzZUZsb2F0KHZhbCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsICsgZm10U3VmZml4O1xyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZtdERhdGVUaW1lKHZhbDogRGF0ZSkge1xyXG4gIGlmICh2YWwgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiBcImRhdGV0aW1lJ1wiICsgdmFsLnRvSVNPU3RyaW5nKCkgKyBcIidcIjtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICB0aHJvd0Vycm9yKFwiJyUxJyBpcyBub3QgYSB2YWxpZCBkYXRlVGltZVwiLCB2YWwpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZm10RGF0ZVRpbWVPZmZzZXQodmFsOiBEYXRlKSB7XHJcbiAgaWYgKHZhbCA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIFwiZGF0ZXRpbWVvZmZzZXQnXCIgKyB2YWwudG9JU09TdHJpbmcoKSArIFwiJ1wiO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIHRocm93RXJyb3IoXCInJTEnIGlzIG5vdCBhIHZhbGlkIGRhdGVUaW1lXCIsIHZhbCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBmbXRUaW1lKHZhbDogYW55KSB7XHJcbiAgaWYgKHZhbCA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuICBpZiAoIWNvcmUuaXNEdXJhdGlvbih2YWwpKSB7XHJcbiAgICB0aHJvd0Vycm9yKFwiJyUxJyBpcyBub3QgYSB2YWxpZCBJU08gODYwMSBkdXJhdGlvblwiLCB2YWwpO1xyXG4gIH1cclxuICByZXR1cm4gXCJ0aW1lJ1wiICsgdmFsICsgXCInXCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZtdEd1aWQodmFsOiBhbnkpIHtcclxuICBpZiAodmFsID09IG51bGwpIHJldHVybiBudWxsO1xyXG4gIGlmICghY29yZS5pc0d1aWQodmFsKSkge1xyXG4gICAgdGhyb3dFcnJvcihcIiclMScgaXMgbm90IGEgdmFsaWQgZ3VpZFwiLCB2YWwpO1xyXG4gIH1cclxuICByZXR1cm4gXCJndWlkJ1wiICsgdmFsICsgXCInXCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZtdEJvb2xlYW4odmFsOiBhbnkpIHtcclxuICBpZiAodmFsID09IG51bGwpIHJldHVybiBudWxsO1xyXG4gIGlmICh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICByZXR1cm4gdmFsLnRyaW0oKS50b0xvd2VyQ2FzZSgpID09PSBcInRydWVcIjtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuICEhdmFsO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZm10QmluYXJ5KHZhbDogYW55KSB7XHJcbiAgaWYgKHZhbCA9PSBudWxsKSByZXR1cm4gdmFsO1xyXG4gIHJldHVybiBcImJpbmFyeSdcIiArIHZhbCArIFwiJ1wiO1xyXG59XHJcblxyXG4vLyBUT0RPOiB1c2UgX19pZGVudGl0eSBpbnN0ZWFkO1xyXG5mdW5jdGlvbiBmbXRVbmRlZmluZWQodmFsOiBhbnkpIHtcclxuICByZXR1cm4gdmFsO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0aHJvd0Vycm9yKG1zZzogc3RyaW5nLCB2YWw6IGFueSkge1xyXG4gIG1zZyA9IGNvcmUuZm9ybWF0U3RyaW5nKG1zZywgdmFsKTtcclxuICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VSYXdEYXRlKHZhbDogYW55KSB7XHJcbiAgaWYgKCFjb3JlLmlzRGF0ZSh2YWwpKSB7XHJcbiAgICB2YWwgPSBEYXRhVHlwZS5wYXJzZURhdGVGcm9tU2VydmVyKHZhbCk7XHJcbiAgfVxyXG4gIHJldHVybiB2YWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlUmF3QmluYXJ5KHZhbDogYW55KSB7XHJcbiAgaWYgKHZhbCAmJiB2YWwuJHZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgIHZhbCA9IHZhbC4kdmFsdWU7IC8vIHRoaXMgd2lsbCBiZSBhIGJ5dGVbXSBlbmNvZGVkIGFzIGEgc3RyaW5nXHJcbiAgfVxyXG4gIHJldHVybiB2YWw7XHJcbn1cclxuXHJcbi8vZnVuY3Rpb24gaGFzVGltZVpvbmUoc291cmNlKSB7XHJcbi8vICB2YXIgaXggPSBzb3VyY2UuaW5kZXhPZihcIlRcIik7XHJcbi8vICB2YXIgdGltZVBhcnQgPSBzb3VyY2Uuc3Vic3RyaW5nKGl4KzEpO1xyXG4vLyAgcmV0dXJuICB0aW1lUGFydC5pbmRleE9mKFwiLVwiKSA+PSAwIHx8IHRpbWVQYXJ0LmluZGV4T2YoXCIrXCIpID49IDAgfHwgdGltZVBhcnQuaW5kZXhPZihcIlpcIik7XHJcbi8vfVxyXG5cclxuXHJcbiJdfQ==