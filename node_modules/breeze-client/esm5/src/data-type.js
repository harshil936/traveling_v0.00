import * as tslib_1 from "tslib";
import { core } from './core';
import { BreezeEnum } from './enum';
import { Validator } from './validate';
var _localTimeRegex = /.\d{3}$/;
/**
DataType is an 'Enum' containing all of the supported data types.
@dynamic
**/
var DataType = /** @class */ (function (_super) {
    tslib_1.__extends(DataType, _super);
    function DataType() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DataType.getComparableFn = function (dataType) {
        if (dataType && dataType.normalize) {
            return dataType.normalize;
        }
        else if (dataType === DataType.Time) {
            // durations must be converted to compare them
            return function (value) {
                return value && core.durationToSeconds(value);
            };
        }
        else {
            // TODO: __identity
            return function (value) {
                return value;
            };
        }
    };
    /** Returns the DataType for a specified EDM type name.
    **/
    DataType.fromEdmDataType = function (typeName) {
        var dt;
        var parts = typeName.split(".");
        if (parts.length > 1) {
            var simpleName = parts[1];
            if (simpleName === "image") {
                // hack
                dt = DataType.Byte;
            }
            else if (parts.length === 2) {
                dt = DataType.fromName(simpleName) || DataType.Undefined;
            }
            else {
                // enum
                // dt = DataType.Int32;
                dt = DataType.String;
            }
        }
        return dt;
    };
    /** Returns the DataType for a specified input. */
    DataType.fromValue = function (val) {
        if (core.isDate(val))
            return DataType.DateTime;
        switch (typeof val) {
            case "string":
                if (core.isGuid(val))
                    return DataType.Guid;
                // the >3 below is a hack to insure that if we are inferring datatypes that
                // very short strings that are valid but unlikely ISO encoded Time's are treated as strings instead.
                else if (core.isDuration(val) && val.length > 3)
                    return DataType.Time;
                else if (core.isDateString(val))
                    return DataType.DateTime;
                return DataType.String;
            case "boolean":
                return DataType.Boolean;
            case "number":
                return DataType.Double;
        }
        return DataType.Undefined;
    };
    DataType.parseTimeFromServer = function (source) {
        if (typeof source === 'string') {
            return source;
        }
        // ODATA v3 format
        if (source && source.__edmType === 'Edm.Time') {
            var seconds = Math.floor(source.ms / 1000);
            return 'PT' + seconds + 'S';
        }
        return source;
    };
    DataType.parseDateAsUTC = function (source) {
        if (typeof source === 'string') {
            // convert to UTC string if no time zone specifier.
            var isLocalTime = _localTimeRegex.test(source);
            // var isLocalTime = !hasTimeZone(source);
            source = isLocalTime ? source + 'Z' : source;
        }
        source = new Date(Date.parse(source));
        return source;
    };
    /** Returns a raw value converted to the specified DataType */
    DataType.parseRawValue = function (val, dataType) {
        // undefined values will be the default for most unmapped properties EXCEPT when they are set
        // in a jsonResultsAdapter ( an unusual use case).
        if (val === undefined)
            return undefined;
        if (!val)
            return val;
        if (dataType && dataType.parseRawValue) {
            val = dataType.parseRawValue(val);
        }
        return val;
    };
    /** @hidden @internal */
    // used during initialization; visible on instance for testing purposes.
    DataType._resetConstants = function () {
        DataType.constants = {
            stringPrefix: "K_",
            nextNumber: -1,
            nextNumberIncrement: -1
        };
    };
    DataType.parseDateFromServer = function (value) { return DataType.parseDateAsUTC(value); };
    DataType.String = new DataType({
        defaultValue: "",
        parse: coerceToString,
        fmtOData: fmtString,
        getNext: getNextString
    });
    DataType.Int64 = new DataType({
        defaultValue: 0,
        isNumeric: true,
        isInteger: true,
        quoteJsonOData: true,
        parse: coerceToInt,
        fmtOData: makeFloatFmt("L"),
        getNext: getNextNumber
    });
    DataType.Int32 = new DataType({
        defaultValue: 0,
        isNumeric: true,
        isInteger: true,
        parse: coerceToInt,
        fmtOData: fmtInt,
        getNext: getNextNumber
    });
    DataType.Int16 = new DataType({
        defaultValue: 0,
        isNumeric: true,
        isInteger: true,
        parse: coerceToInt,
        fmtOData: fmtInt,
        getNext: getNextNumber
    });
    DataType.Byte = new DataType({
        defaultValue: 0,
        isNumeric: true,
        isInteger: true,
        parse: coerceToInt,
        fmtOData: fmtInt
    });
    DataType.Decimal = new DataType({
        defaultValue: 0,
        isNumeric: true,
        quoteJsonOData: true,
        isFloat: true,
        parse: coerceToFloat,
        fmtOData: makeFloatFmt("m"),
        getNext: getNextNumber
    });
    DataType.Double = new DataType({
        defaultValue: 0,
        isNumeric: true,
        isFloat: true,
        parse: coerceToFloat,
        fmtOData: makeFloatFmt("d"),
        getNext: getNextNumber
    });
    DataType.Single = new DataType({
        defaultValue: 0,
        isNumeric: true,
        isFloat: true,
        parse: coerceToFloat,
        fmtOData: makeFloatFmt("f"),
        getNext: getNextNumber
    });
    DataType.DateTime = new DataType({
        defaultValue: new Date(1900, 0, 1),
        isDate: true,
        parse: coerceToDate,
        parseRawValue: parseRawDate,
        normalize: function (value) { return value && value.getTime && value.getTime(); },
        fmtOData: fmtDateTime,
        getNext: getNextDateTime,
        getConcurrencyValue: getConcurrencyDateTime
    });
    DataType.DateTimeOffset = new DataType({
        defaultValue: new Date(1900, 0, 1),
        isDate: true,
        parse: coerceToDate,
        parseRawValue: parseRawDate,
        normalize: function (value) { return value && value.getTime && value.getTime(); },
        fmtOData: fmtDateTimeOffset,
        getNext: getNextDateTime,
        getConcurrencyValue: getConcurrencyDateTime
    });
    DataType.Time = new DataType({
        defaultValue: "PT0S",
        fmtOData: fmtTime,
        parseRawValue: DataType.parseTimeFromServer
    });
    DataType.Boolean = new DataType({
        defaultValue: false,
        parse: coerceToBool,
        fmtOData: fmtBoolean
    });
    DataType.Guid = new DataType({
        defaultValue: "00000000-0000-0000-0000-000000000000",
        parse: coerceToGuid,
        fmtOData: fmtGuid,
        getNext: getNextGuid,
        parseRawValue: function (val) { return val.toLowerCase(); },
        getConcurrencyValue: core.getUuid
    });
    DataType.Binary = new DataType({
        defaultValue: null,
        fmtOData: fmtBinary,
        parseRawValue: parseRawBinary
    });
    DataType.Undefined = new DataType({
        defaultValue: undefined,
        fmtOData: fmtUndefined
    });
    return DataType;
}(BreezeEnum));
export { DataType };
DataType.prototype._$typeName = "DataType";
Error['x'] = DataType._resetConstants();
Error['x'] = DataType.resolveSymbols();
Error['x'] = DataType.getSymbols().forEach(function (sym) { return sym.validatorCtor = getValidatorCtor(sym); });
// private functions;
function getValidatorCtor(dataType) {
    switch (dataType) {
        case DataType.String:
            return Validator.string;
        case DataType.Int64:
            return Validator.int64;
        case DataType.Int32:
            return Validator.int32;
        case DataType.Int16:
            return Validator.int16;
        case DataType.Decimal:
            return Validator.number;
        case DataType.Double:
            return Validator.number;
        case DataType.Single:
            return Validator.number;
        case DataType.DateTime:
            return Validator.date;
        case DataType.DateTimeOffset:
            return Validator.date;
        case DataType.Boolean:
            return Validator.bool;
        case DataType.Guid:
            return Validator.guid;
        case DataType.Byte:
            return Validator.byte;
        case DataType.Binary:
            // TODO: don't quite know how to validate this yet.
            return Validator.none;
        case DataType.Time:
            return Validator.duration;
        case DataType.Undefined:
            return Validator.none;
    }
}
function getNextString() {
    return DataType.constants.stringPrefix + getNextNumber().toString();
}
function getNextNumber() {
    var result = DataType.constants.nextNumber;
    DataType.constants.nextNumber += DataType.constants.nextNumberIncrement;
    return result;
}
function getNextGuid() {
    return core.getUuid();
}
function getNextDateTime() {
    return new Date();
}
function getConcurrencyDateTime(val) {
    // use the current datetime but insure that it is different from previous call.
    var dt = new Date();
    var dt2 = new Date();
    while (dt.getTime() === dt2.getTime()) {
        dt2 = new Date();
    }
    return dt2;
}
function coerceToString(source, sourceTypeName) {
    return (source == null) ? source : source.toString();
}
function coerceToGuid(source, sourceTypeName) {
    if (sourceTypeName === "string") {
        return source.trim().toLowerCase();
    }
    return source;
}
function coerceToInt(source, sourceTypeName) {
    if (sourceTypeName === "string") {
        var src = source.trim();
        if (src === "")
            return null;
        var val = parseInt(src, 10);
        return isNaN(val) ? source : val;
    }
    else if (sourceTypeName === "number") {
        return Math.round(source);
    }
    // do we want to coerce floats -> ints
    return source;
}
function coerceToFloat(source, sourceTypeName) {
    if (sourceTypeName === "string") {
        var src = source.trim();
        if (src === "")
            return null;
        var val = parseFloat(src);
        return isNaN(val) ? source : val;
    }
    return source;
}
function coerceToDate(source, sourceTypeName) {
    var val;
    if (sourceTypeName === "string") {
        var src = source.trim();
        if (src === "")
            return null;
        val = new Date(Date.parse(src));
        return core.isDate(val) ? val : source;
    }
    else if (sourceTypeName === "number") {
        val = new Date(source);
        return core.isDate(val) ? val : source;
    }
    return source;
}
function coerceToBool(source, sourceTypeName) {
    if (sourceTypeName === "string") {
        var src = source.trim().toLowerCase();
        if (src === "false" || src === "") {
            return false;
        }
        else if (src === "true") {
            return true;
        }
        else {
            return source;
        }
    }
    return source;
}
function fmtString(val) {
    return val == null ? null : "'" + val.replace(/'/g, "''") + "'";
}
function fmtInt(val) {
    return val == null ? null : ((typeof val === "string") ? parseInt(val, 10) : val);
}
function makeFloatFmt(fmtSuffix) {
    return function (val) {
        if (val == null)
            return null;
        if (typeof val === "string") {
            val = parseFloat(val);
        }
        return val + fmtSuffix;
    };
}
function fmtDateTime(val) {
    if (val == null)
        return null;
    try {
        return "datetime'" + val.toISOString() + "'";
    }
    catch (e) {
        throwError("'%1' is not a valid dateTime", val);
    }
}
function fmtDateTimeOffset(val) {
    if (val == null)
        return null;
    try {
        return "datetimeoffset'" + val.toISOString() + "'";
    }
    catch (e) {
        throwError("'%1' is not a valid dateTime", val);
    }
}
function fmtTime(val) {
    if (val == null)
        return null;
    if (!core.isDuration(val)) {
        throwError("'%1' is not a valid ISO 8601 duration", val);
    }
    return "time'" + val + "'";
}
function fmtGuid(val) {
    if (val == null)
        return null;
    if (!core.isGuid(val)) {
        throwError("'%1' is not a valid guid", val);
    }
    return "guid'" + val + "'";
}
function fmtBoolean(val) {
    if (val == null)
        return null;
    if (typeof val === "string") {
        return val.trim().toLowerCase() === "true";
    }
    else {
        return !!val;
    }
}
function fmtBinary(val) {
    if (val == null)
        return val;
    return "binary'" + val + "'";
}
// TODO: use __identity instead;
function fmtUndefined(val) {
    return val;
}
function throwError(msg, val) {
    msg = core.formatString(msg, val);
    throw new Error(msg);
}
function parseRawDate(val) {
    if (!core.isDate(val)) {
        val = DataType.parseDateFromServer(val);
    }
    return val;
}
function parseRawBinary(val) {
    if (val && val.$value !== undefined) {
        val = val.$value; // this will be a byte[] encoded as a string
    }
    return val;
}
//function hasTimeZone(source) {
//  var ix = source.indexOf("T");
//  var timePart = source.substring(ix+1);
//  return  timePart.indexOf("-") >= 0 || timePart.indexOf("+") >= 0 || timePart.indexOf("Z");
//}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YS10eXBlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vYnJlZXplLWNsaWVudC8iLCJzb3VyY2VzIjpbInNyYy9kYXRhLXR5cGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxRQUFRLENBQUM7QUFDOUIsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUNwQyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sWUFBWSxDQUFDO0FBRXZDLElBQUksZUFBZSxHQUFHLFNBQVMsQ0FBQztBQUVoQzs7O0dBR0c7QUFDSDtJQUE4QixvQ0FBVTtJQUF4Qzs7SUFpU0EsQ0FBQztJQWpIUSx3QkFBZSxHQUF0QixVQUF1QixRQUFtQjtRQUN4QyxJQUFJLFFBQVEsSUFBSSxRQUFRLENBQUMsU0FBUyxFQUFFO1lBQ2xDLE9BQU8sUUFBUSxDQUFDLFNBQVMsQ0FBQztTQUMzQjthQUFNLElBQUksUUFBUSxLQUFLLFFBQVEsQ0FBQyxJQUFJLEVBQUU7WUFDckMsOENBQThDO1lBQzlDLE9BQU8sVUFBVSxLQUFVO2dCQUN6QixPQUFPLEtBQUssSUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDaEQsQ0FBQyxDQUFDO1NBQ0g7YUFBTTtZQUNMLG1CQUFtQjtZQUNuQixPQUFPLFVBQVUsS0FBVTtnQkFDekIsT0FBTyxLQUFLLENBQUM7WUFDZixDQUFDLENBQUM7U0FDSDtJQUNILENBQUM7SUFFRDtPQUNHO0lBQ0ksd0JBQWUsR0FBdEIsVUFBdUIsUUFBZ0I7UUFDckMsSUFBSSxFQUF3QixDQUFDO1FBQzdCLElBQUksS0FBSyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDaEMsSUFBSSxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUNwQixJQUFJLFVBQVUsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDMUIsSUFBSSxVQUFVLEtB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ckIsR0FBRyxHQUFHLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUN6QztJQUNELE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQztBQUVELFNBQVMsY0FBYyxDQUFDLEdBQVE7SUFDOUIsSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLE1BQU0sS0FBSyxTQUFTLEVBQUU7UUFDbkMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyw0Q0FBNEM7S0FDL0Q7SUFDRCxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFFRCxnQ0FBZ0M7QUFDaEMsaUNBQWlDO0FBQ2pDLDBDQUEwQztBQUMxQyw4RkFBOEY7QUFDOUYsR0FBRyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvcmUgfSBmcm9tICcuL2NvcmUnO1xyXG5pbXBvcnQgeyBCcmVlemVFbnVtIH0gZnJvbSAnLi9lbnVtJztcclxuaW1wb3J0IHsgVmFsaWRhdG9yIH0gZnJvbSAnLi92YWxpZGF0ZSc7XHJcblxyXG5sZXQgX2xvY2FsVGltZVJlZ2V4ID0gLy5cXGR7M30kLztcclxuXHJcbi8qKiAgXHJcbkRhdGFUeXBlIGlzIGFuICdFbnVtJyBjb250YWluaW5nIGFsbCBvZiB0aGUgc3VwcG9ydGVkIGRhdGEgdHlwZXMuXHJcbkBkeW5hbWljXHJcbioqL1xyXG5leHBvcnQgY2xhc3MgRGF0YVR5cGUgZXh0ZW5kcyBCcmVlemVFbnVtIHtcclxuICAvKiogVGhlIGRlZmF1bHQgdmFsdWUgb2YgdGhpcyBEYXRhVHlwZS4gX19SZWFkIE9ubHlfXyAqKi9cclxuICBkZWZhdWx0VmFsdWU/OiBhbnk7XHJcbiAgLyoqIFdoZXRoZXIgdGhpcyBpcyBhICdudW1lcmljJyBEYXRhVHlwZS4gX19SZWFkIE9ubHlfXyAqKi9cclxuICBpc051bWVyaWM/OiBib29sZWFuO1xyXG4gIC8qKiBXaGV0aGVyIHRoaXMgaXMgYW4gJ2ludGVnZXInIERhdGFUeXBlLiBfX1JlYWQgT25seV9fICoqL1xyXG4gIGlzSW50ZWdlcj86IGJvb2xlYW47XHJcbiAgLyoqIFdoZXRoZXIgdG8gcXVvdGUgdGhlIGpzb24gdmFsdWUgd2hlbiBmb3JtYXR0aW5nIHRoaXMgRGF0YVR5cGUgZm9yIE9EYXRhLiAqL1xyXG4gIHF1b3RlSnNvbk9EYXRhPzogYm9vbGVhbjtcclxuICAvKiogVGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIFtbVmFsaWRhdG9yXV0gdG8gYmUgdXNlZCBpbiB2YWxpZGF0aW5nIGluc3RhbmNlcyBvZiB0aGlzIERhdGFUeXBlLiAqL1xyXG4gIHZhbGlkYXRvckN0b3I/KGNvbnRleHQ/OiBhbnkpOiBWYWxpZGF0b3I7XHJcbiAgLyoqIFxyXG4gIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIG5vcm1hbGl6ZSBhIGRhdGEgdmFsdWUgZm9yIGNvbXBhcmlzb24sIGlmIGl0cyB2YWx1ZSBjYW5ub3QgYmUgdXNlZCBkaXJlY3RseS4gXHJcbiAgTm90ZSB0aGF0IHRoaXMgd2lsbCBiZSBjYWxsZWQgZWFjaCB0aW1lIGEgcHJvcGVydHkgaXMgY2hhbmdlZCwgc28gbWFrZSBpdCBmYXN0LlxyXG4gIEByZXR1cm4gdmFsdWUgYXBwcm9wcmlhdGUgZm9yIHRoaXMgRGF0YVR5cGVcclxuICAqKi9cclxuICBub3JtYWxpemU/KHZhbHVlOiBhbnkpOiBhbnk7XHJcbiAgLyoqXHJcbiAgT3B0aW9uYWwgZnVuY3Rpb24gdG8gY29udmVydCBhIHJhdyAoc2VydmVyKSB2YWx1ZSBmcm9tIHN0cmluZyB0byB0aGlzIERhdGFUeXBlLlxyXG4gIEByZXR1cm4gdmFsdWUgYXBwcm9wcmlhdGUgZm9yIHRoaXMgRGF0YVR5cGVcclxuICAqKi9cclxuICBwYXJzZVJhd1ZhbHVlPyh2YWx1ZTogYW55KTogYW55O1xyXG4gIC8qKlxyXG4gIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSB2YWx1ZSBmcm9tIHN0cmluZyB0byB0aGlzIERhdGFUeXBlLiAgTm90ZSB0aGF0IHRoaXMgd2lsbCBiZSBjYWxsZWQgZWFjaCB0aW1lIGEgcHJvcGVydHkgaXMgY2hhbmdlZCwgc28gbWFrZSBpdCBmYXN0LlxyXG4gIEByZXR1cm4gdmFsdWUgYXBwcm9wcmlhdGUgZm9yIHRoaXMgRGF0YVR5cGUgXHJcbiAgKiovXHJcbiAgcGFyc2U/KHNvdXJjZTogYW55LCBzb3VyY2VUeXBlTmFtZTogc3RyaW5nKTogYW55O1xyXG4gIC8qKiBcclxuICBPcHRpb25hbCBmdW5jdGlvbiB0byBmb3JtYXQgdGhpcyBEYXRhVHlwZSBmb3IgT0RhdGEgcXVlcmllcy5cclxuICBAcmV0dXJuIHZhbHVlIGFwcHJvcHJpYXRlIGZvciBPRGF0YSBxdWVyeSAgIFxyXG4gICoqL1xyXG4gIGZtdE9EYXRhPyh2YWx1ZTogYW55KTogYW55O1xyXG4gIC8qKiBcclxuICBPcHRpb25hbCBmdW5jdGlvbiB0byBnZXQgdGhlIG5leHQgdmFsdWUgZm9yIGtleSBnZW5lcmF0aW9uLCBpZiB0aGlzIGRhdGF0eXBlIGlzIHVzZWQgYXMgYSBrZXkuICBVc2VzIGFuIGludGVybmFsIHRhYmxlIG9mIHByZXZpb3VzIHZhbHVlcy5cclxuICBAcmV0dXJuIHZhbHVlIGFwcHJvcHJpYXRlIGZvciB0aGlzIERhdGFUeXBlIFxyXG4gICoqL1xyXG4gIGdldE5leHQ/KCk6IGFueTtcclxuICAvKipcclxuICBPcHRpb25hbCBmdW5jdGlvbiB0byBnZXQgdGhlIG5leHQgdmFsdWUgd2hlbiB0aGUgZGF0YXR5cGUgaXMgdXNlZCBhcyBhIGNvbmN1cnJlbmN5IHByb3BlcnR5LlxyXG4gIEBwYXJhbSBwcmV2aW91c1ZhbHVlXHJcbiAgQHJldHVybiB0aGUgbmV4dCBjb25jdXJyZW5jeSB2YWx1ZSwgd2hpY2ggbWF5IGJlIGEgZnVuY3Rpb24gb2YgdGhlIHByZXZpb3VzVmFsdWUuXHJcbiAgKiovXHJcbiAgZ2V0Q29uY3VycmVuY3lWYWx1ZT8ocHJldmlvdXNWYWx1ZT86IGFueSk6IGFueTtcclxuXHJcbiAgc3RhdGljIHBhcnNlRGF0ZUZyb21TZXJ2ZXIgPSAodmFsdWU6IGFueSkgPT4gRGF0YVR5cGUucGFyc2VEYXRlQXNVVEModmFsdWUpO1xyXG4gIC8vIHNhbWUgZWZmZWN0IGFzIGFib3ZlIGJ1dCBkb2Vzbid0IGdpdmUgcmlnaHQgVFNET0MuXHJcbiAgLy8gc3RhdGljIHBhcnNlRGF0ZUZyb21TZXJ2ZXIgPSBEYXRhVHlwZS5wYXJzZURhdGVBc1VUQztcclxuXHJcbiAgLyoqIEBoaWRkZW4gQGludGVybmFsICovXHJcbiAgc3RhdGljIGNvbnN0YW50czogeyBzdHJpbmdQcmVmaXg6IHN0cmluZywgbmV4dE51bWJlcjogbnVtYmVyLCBuZXh0TnVtYmVySW5jcmVtZW50OiBudW1iZXIgfTtcclxuXHJcbiAgc3RhdGljIFN0cmluZyA9IG5ldyBEYXRhVHlwZSh7XHJcbiAgICBkZWZhdWx0VmFsdWU6IFwiXCIsXHJcbiAgICBwYXJzZTogY29lcmNlVG9TdHJpbmcsXHJcbiAgICBmbXRPRGF0YTogZm10U3RyaW5nLFxyXG4gICAgZ2V0TmV4dDogZ2V0TmV4dFN0cmluZ1xyXG4gIH0pO1xyXG5cclxuICBzdGF0aWMgSW50NjQgPSBuZXcgRGF0YVR5cGUoe1xyXG4gICAgZGVmYXVsdFZhbHVlOiAwLFxyXG4gICAgaXNOdW1lcmljOiB0cnVlLFxyXG4gICAgaXNJbnRlZ2VyOiB0cnVlLFxyXG4gICAgcXVvdGVKc29uT0RhdGE6IHRydWUsXHJcbiAgICBwYXJzZTogY29lcmNlVG9JbnQsXHJcbiAgICBmbXRPRGF0YTogbWFrZUZsb2F0Rm10KFwiTFwiKSxcclxuICAgIGdldE5leHQ6IGdldE5leHROdW1iZXJcclxuICB9KTtcclxuXHJcbiAgc3RhdGljIEludDMyID0gbmV3IERhdGFUeXBlKHtcclxuICAgIGRlZmF1bHRWYWx1ZTogMCxcclxuICAgIGlzTnVtZXJpYzogdHJ1ZSxcclxuICAgIGlzSW50ZWdlcjogdHJ1ZSxcclxuICAgIHBhcnNlOiBjb2VyY2VUb0ludCxcclxuICAgIGZtdE9EYXRhOiBmbXRJbnQsXHJcbiAgICBnZXROZXh0OiBnZXROZXh0TnVtYmVyXHJcbiAgfSk7XHJcblxyXG4gIHN0YXRpYyBJbnQxNiA9IG5ldyBEYXRhVHlwZSh7XHJcbiAgICBkZWZhdWx0VmFsdWU6IDAsXHJcbiAgICBpc051bWVyaWM6IHRydWUsXHJcbiAgICBpc0ludGVnZXI6IHRydWUsXHJcbiAgICBwYXJzZTogY29lcmNlVG9JbnQsXHJcbiAgICBmbXRPRGF0YTogZm10SW50LFxyXG4gICAgZ2V0TmV4dDogZ2V0TmV4dE51bWJlclxyXG4gIH0pO1xyXG5cclxuICBzdGF0aWMgQnl0ZSA9IG5ldyBEYXRhVHlwZSh7XHJcbiAgICBkZWZhdWx0VmFsdWU6IDAsXHJcbiAgICBpc051bWVyaWM6IHRydWUsXHJcbiAgICBpc0ludGVnZXI6IHRydWUsXHJcbiAgICBwYXJzZTogY29lcmNlVG9JbnQsXHJcbiAgICBmbXRPRGF0YTogZm10SW50XHJcbiAgfSk7XHJcblxyXG4gIHN0YXRpYyBEZWNpbWFsID0gbmV3IERhdGFUeXBlKHtcclxuICAgIGRlZmF1bHRWYWx1ZTogMCxcclxuICAgIGlzTnVtZXJpYzogdHJ1ZSxcclxuICAgIHF1b3RlSnNvbk9EYXRhOiB0cnVlLFxyXG4gICAgaXNGbG9hdDogdHJ1ZSxcclxuICAgIHBhcnNlOiBjb2VyY2VUb0Zsb2F0LFxyXG4gICAgZm10T0RhdGE6IG1ha2VGbG9hdEZtdChcIm1cIiksXHJcbiAgICBnZXROZXh0OiBnZXROZXh0TnVtYmVyXHJcbiAgfSk7XHJcblxyXG4gIHN0YXRpYyBEb3VibGUgPSBuZXcgRGF0YVR5cGUoe1xyXG4gICAgZGVmYXVsdFZhbHVlOiAwLFxyXG4gICAgaXNOdW1lcmljOiB0cnVlLFxyXG4gICAgaXNGbG9hdDogdHJ1ZSxcclxuICAgIHBhcnNlOiBjb2VyY2VUb0Zsb2F0LFxyXG4gICAgZm10T0RhdGE6IG1ha2VGbG9hdEZtdChcImRcIiksXHJcbiAgICBnZXROZXh0OiBnZXROZXh0TnVtYmVyXHJcbiAgfSk7XHJcblxyXG4gIHN0YXRpYyBTaW5nbGUgPSBuZXcgRGF0YVR5cGUoe1xyXG4gICAgZGVmYXVsdFZhbHVlOiAwLFxyXG4gICAgaXNOdW1lcmljOiB0cnVlLFxyXG4gICAgaXNGbG9hdDogdHJ1ZSxcclxuICAgIHBhcnNlOiBjb2VyY2VUb0Zsb2F0LFxyXG4gICAgZm10T0RhdGE6IG1ha2VGbG9hdEZtdChcImZcIiksXHJcbiAgICBnZXROZXh0OiBnZXROZXh0TnVtYmVyXHJcbiAgfSk7XHJcblxyXG4gIHN0YXRpYyBEYXRlVGltZSA9IG5ldyBEYXRhVHlwZSh7XHJcbiAgICBkZWZhdWx0VmFsdWU6IG5ldyBEYXRlKDE5MDAsIDAsIDEpLFxyXG4gICAgaXNEYXRlOiB0cnVlLFxyXG4gICAgcGFyc2U6IGNvZXJjZVRvRGF0ZSxcclxuICAgIHBhcnNlUmF3VmFsdWU6IHBhcnNlUmF3RGF0ZSxcclxuICAgIG5vcm1hbGl6ZTogZnVuY3Rpb24gKHZhbHVlOiBhbnkpIHsgcmV0dXJuIHZhbHVlICYmIHZhbHVlLmdldFRpbWUgJiYgdmFsdWUuZ2V0VGltZSgpOyB9LCAvLyBkYXRlcyBkb24ndCBwZXJmb3JtIGVxdWFsaXR5IGNvbXBhcmlzb25zIHByb3Blcmx5XHJcbiAgICBmbXRPRGF0YTogZm10RGF0ZVRpbWUsXHJcbiAgICBnZXROZXh0OiBnZXROZXh0RGF0ZVRpbWUsXHJcbiAgICBnZXRDb25jdXJyZW5jeVZhbHVlOiBnZXRDb25jdXJyZW5jeURhdGVUaW1lXHJcbiAgfSk7XHJcblxyXG4gIHN0YXRpYyBEYXRlVGltZU9mZnNldCA9IG5ldyBEYXRhVHlwZSh7XHJcbiAgICBkZWZhdWx0VmFsdWU6IG5ldyBEYXRlKDE5MDAsIDAsIDEpLFxyXG4gICAgaXNEYXRlOiB0cnVlLFxyXG4gICAgcGFyc2U6IGNvZXJjZVRvRGF0ZSxcclxuICAgIHBhcnNlUmF3VmFsdWU6IHBhcnNlUmF3RGF0ZSxcclxuICAgIG5vcm1hbGl6ZTogZnVuY3Rpb24gKHZhbHVlOiBhbnkpIHsgcmV0dXJuIHZhbHVlICYmIHZhbHVlLmdldFRpbWUgJiYgdmFsdWUuZ2V0VGltZSgpOyB9LCAvLyBkYXRlcyBkb24ndCBwZXJmb3JtIGVxdWFsaXR5IGNvbXBhcmlzb25zIHByb3Blcmx5XHJcbiAgICBmbXRPRGF0YTogZm10RGF0ZVRpbWVPZmZzZXQsXHJcbiAgICBnZXROZXh0OiBnZXROZXh0RGF0ZVRpbWUsXHJcbiAgICBnZXRDb25jdXJyZW5jeVZhbHVlOiBnZXRDb25jdXJyZW5jeURhdGVUaW1lXHJcbiAgfSk7XHJcblxyXG4gIHN0YXRpYyBUaW1lID0gbmV3IERhdGFUeXBlKHtcclxuICAgIGRlZmF1bHRWYWx1ZTogXCJQVDBTXCIsXHJcbiAgICBmbXRPRGF0YTogZm10VGltZSxcclxuICAgIHBhcnNlUmF3VmFsdWU6IERhdGFUeXBlLnBhcnNlVGltZUZyb21TZXJ2ZXJcclxuICB9KTtcclxuXHJcbiAgc3RhdGljIEJvb2xlYW4gPSBuZXcgRGF0YVR5cGUoe1xyXG4gICAgZGVmYXVsdFZhbHVlOiBmYWxzZSxcclxuICAgIHBhcnNlOiBjb2VyY2VUb0Jvb2wsXHJcbiAgICBmbXRPRGF0YTogZm10Qm9vbGVhblxyXG4gIH0pO1xyXG5cclxuICBzdGF0aWMgR3VpZCA9IG5ldyBEYXRhVHlwZSh7XHJcbiAgICBkZWZhdWx0VmFsdWU6IFwiMDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwXCIsXHJcbiAgICBwYXJzZTogY29lcmNlVG9HdWlkLFxyXG4gICAgZm10T0RhdGE6IGZtdEd1aWQsXHJcbiAgICBnZXROZXh0OiBnZXROZXh0R3VpZCxcclxuICAgIHBhcnNlUmF3VmFsdWU6IGZ1bmN0aW9uICh2YWw6IHN0cmluZykgeyByZXR1cm4gdmFsLnRvTG93ZXJDYXNlKCk7IH0sXHJcbiAgICBnZXRDb25jdXJyZW5jeVZhbHVlOiBjb3JlLmdldFV1aWRcclxuICB9KTtcclxuXHJcbiAgc3RhdGljIEJpbmFyeSA9IG5ldyBEYXRhVHlwZSh7XHJcbiAgICBkZWZhdWx0VmFsdWU6IG51bGwsXHJcbiAgICBmbXRPRGF0YTogZm10QmluYXJ5LFxyXG4gICAgcGFyc2VSYXdWYWx1ZTogcGFyc2VSYXdCaW5hcnlcclxuICB9KTtcclxuXHJcbiAgc3RhdGljIFVuZGVmaW5lZCA9IG5ldyBEYXRhVHlwZSh7XHJcbiAgICBkZWZhdWx0VmFsdWU6IHVuZGVmaW5lZCxcclxuICAgIGZtdE9EYXRhOiBmbXRVbmRlZmluZWRcclxuICB9KTtcclxuXHJcbiAgc3RhdGljIGdldENvbXBhcmFibGVGbihkYXRhVHlwZT86IERhdGFUeXBlKSB7XHJcbiAgICBpZiAoZGF0YVR5cGUgJiYgZGF0YVR5cGUubm9ybWFsaXplKSB7XHJcbiAgICAgIHJldHVybiBkYXRhVHlwZS5ub3JtYWxpemU7XHJcbiAgICB9IGVsc2UgaWYgKGRhdGFUeXBlID09PSBEYXRhVHlwZS5UaW1lKSB7XHJcbiAgICAgIC8vIGR1cmF0aW9ucyBtdXN0IGJlIGNvbnZlcnRlZCB0byBjb21wYXJlIHRoZW1cclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlICYmIGNvcmUuZHVyYXRpb25Ub1NlY29uZHModmFsdWUpO1xyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gVE9ETzogX19pZGVudGl0eVxyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlOiBhbnkpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogUmV0dXJucyB0aGUgRGF0YVR5cGUgZm9yIGEgc3BlY2lmaWVkIEVETSB0eXBlIG5hbWUuXHJcbiAgKiovXHJcbiAgc3RhdGljIGZyb21FZG1EYXRhVHlwZSh0eXBlTmFtZTogc3RyaW5nKSB7XHJcbiAgICBsZXQgZHQ6IERhdGFUeXBlIHwgdW5kZWZpbmVkO1xyXG4gICAgbGV0IHBhcnRzID0gdHlwZU5hbWUuc3BsaXQoXCIuXCIpO1xyXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgbGV0IHNpbXBsZU5hbWUgPSBwYXJ0c1sxXTtcclxuICAgICAgaWYgKHNpbXBsZU5hbWUgPT09IFwiaW1hZ2VcIikge1xyXG4gICAgICAgIC8vIGhhY2tcclxuICAgICAgICBkdCA9IERhdGFUeXBlLkJ5dGU7XHJcbiAgICAgIH0gZWxzZSBpZiAocGFydHMubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgZHQgPSBEYXRhVHlwZS5mcm9tTmFtZShzaW1wbGVOYW1lKSB8fCBEYXRhVHlwZS5VbmRlZmluZWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gZW51bVxyXG4gICAgICAgIC8vIGR0ID0gRGF0YVR5cGUuSW50MzI7XHJcbiAgICAgICAgZHQgPSBEYXRhVHlwZS5TdHJpbmc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZHQ7XHJcbiAgfVxyXG5cclxuICAvKiogUmV0dXJucyB0aGUgRGF0YVR5cGUgZm9yIGEgc3BlY2lmaWVkIGlucHV0LiAqL1xyXG4gIHN0YXRpYyBmcm9tVmFsdWUodmFsOiBhbnkpIHtcclxuICAgIGlmIChjb3JlLmlzRGF0ZSh2YWwpKSByZXR1cm4gRGF0YVR5cGUuRGF0ZVRpbWU7XHJcbiAgICBzd2l0Y2ggKHR5cGVvZiB2YWwpIHtcclxuICAgICAgY2FzZSBcInN0cmluZ1wiOlxyXG4gICAgICAgIGlmIChjb3JlLmlzR3VpZCh2YWwpKSByZXR1cm4gRGF0YVR5cGUuR3VpZDtcclxuICAgICAgICAvLyB0aGUgPjMgYmVsb3cgaXMgYSBoYWNrIHRvIGluc3VyZSB0aGF0IGlmIHdlIGFyZSBpbmZlcnJpbmcgZGF0YXR5cGVzIHRoYXRcclxuICAgICAgICAvLyB2ZXJ5IHNob3J0IHN0cmluZ3MgdGhhdCBhcmUgdmFsaWQgYnV0IHVubGlrZWx5IElTTyBlbmNvZGVkIFRpbWUncyBhcmUgdHJlYXRlZCBhcyBzdHJpbmdzIGluc3RlYWQuXHJcbiAgICAgICAgZWxzZSBpZiAoY29yZS5pc0R1cmF0aW9uKHZhbCkgJiYgdmFsLmxlbmd0aCA+IDMpIHJldHVybiBEYXRhVHlwZS5UaW1lO1xyXG4gICAgICAgIGVsc2UgaWYgKGNvcmUuaXNEYXRlU3RyaW5nKHZhbCkpIHJldHVybiBEYXRhVHlwZS5EYXRlVGltZTtcclxuICAgICAgICByZXR1cm4gRGF0YVR5cGUuU3RyaW5nO1xyXG4gICAgICBjYXNlIFwiYm9vbGVhblwiOlxyXG4gICAgICAgIHJldHVybiBEYXRhVHlwZS5Cb29sZWFuO1xyXG4gICAgICBjYXNlIFwibnVtYmVyXCI6XHJcbiAgICAgICAgcmV0dXJuIERhdGFUeXBlLkRvdWJsZTtcclxuICAgIH1cclxuICAgIHJldHVybiBEYXRhVHlwZS5VbmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcGFyc2VUaW1lRnJvbVNlcnZlcihzb3VyY2U6IGFueSkge1xyXG4gICAgaWYgKHR5cGVvZiBzb3VyY2UgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICAvLyBPREFUQSB2MyBmb3JtYXRcclxuICAgIGlmIChzb3VyY2UgJiYgc291cmNlLl9fZWRtVHlwZSA9PT0gJ0VkbS5UaW1lJykge1xyXG4gICAgICBsZXQgc2Vjb25kcyA9IE1hdGguZmxvb3Ioc291cmNlLm1zIC8gMTAwMCk7XHJcbiAgICAgIHJldHVybiAnUFQnICsgc2Vjb25kcyArICdTJztcclxuICAgIH1cclxuICAgIHJldHVybiBzb3VyY2U7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcGFyc2VEYXRlQXNVVEMoc291cmNlOiBhbnkpIHtcclxuICAgIGlmICh0eXBlb2Ygc291cmNlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAvLyBjb252ZXJ0IHRvIFVUQyBzdHJpbmcgaWYgbm8gdGltZSB6b25lIHNwZWNpZmllci5cclxuICAgICAgbGV0IGlzTG9jYWxUaW1lID0gX2xvY2FsVGltZVJlZ2V4LnRlc3Qoc291cmNlKTtcclxuICAgICAgLy8gdmFyIGlzTG9jYWxUaW1lID0gIWhhc1RpbWVab25lKHNvdXJjZSk7XHJcbiAgICAgIHNvdXJjZSA9IGlzTG9jYWxUaW1lID8gc291cmNlICsgJ1onIDogc291cmNlO1xyXG4gICAgfVxyXG4gICAgc291cmNlID0gbmV3IERhdGUoRGF0ZS5wYXJzZShzb3VyY2UpKTtcclxuICAgIHJldHVybiBzb3VyY2U7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqIFJldHVybnMgYSByYXcgdmFsdWUgY29udmVydGVkIHRvIHRoZSBzcGVjaWZpZWQgRGF0YVR5cGUgKi9cclxuICBzdGF0aWMgcGFyc2VSYXdWYWx1ZSh2YWw6IGFueSwgZGF0YVR5cGU/OiBEYXRhVHlwZSkge1xyXG4gICAgLy8gdW5kZWZpbmVkIHZhbHVlcyB3aWxsIGJlIHRoZSBkZWZhdWx0IGZvciBtb3N0IHVubWFwcGVkIHByb3BlcnRpZXMgRVhDRVBUIHdoZW4gdGhleSBhcmUgc2V0XHJcbiAgICAvLyBpbiBhIGpzb25SZXN1bHRzQWRhcHRlciAoIGFuIHVudXN1YWwgdXNlIGNhc2UpLlxyXG4gICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgaWYgKCF2YWwpIHJldHVybiB2YWw7XHJcbiAgICBpZiAoZGF0YVR5cGUgJiYgZGF0YVR5cGUucGFyc2VSYXdWYWx1ZSkge1xyXG4gICAgICB2YWwgPSBkYXRhVHlwZS5wYXJzZVJhd1ZhbHVlKHZhbCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsO1xyXG4gIH1cclxuXHJcbiAgLyoqIEBoaWRkZW4gQGludGVybmFsICovXHJcbiAgLy8gdXNlZCBkdXJpbmcgaW5pdGlhbGl6YXRpb247IHZpc2libGUgb24gaW5zdGFuY2UgZm9yIHRlc3RpbmcgcHVycG9zZXMuXHJcbiAgc3RhdGljIF9yZXNldENvbnN0YW50cygpIHtcclxuICAgIERhdGFUeXBlLmNvbnN0YW50cyA9IHtcclxuICAgICAgc3RyaW5nUHJlZml4OiBcIktfXCIsXHJcbiAgICAgIG5leHROdW1iZXI6IC0xLFxyXG4gICAgICBuZXh0TnVtYmVySW5jcmVtZW50OiAtMVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIE5PVCBZRVQgTkVFREVEIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gdmFyIF91dGNPZmZzZXRNcyA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDA7XHJcblxyXG4gIC8vRGF0YVR5cGUucGFyc2VEYXRlQXNMb2NhbCA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcclxuICAvLyAgICB2YXIgZHQgPSBEYXRhVHlwZS5wYXJzZURhdGVzQXNVVEMoc291cmNlKTtcclxuICAvLyAgICBpZiAoX19pc0RhdGUoZHQpKSB7XHJcbiAgLy8gICAgICAgIGR0ID0gbmV3IERhdGUoZHQuZ2V0VGltZSgpICsgX3V0Y09mZnNldE1zKTtcclxuICAvLyAgICB9XHJcbiAgLy8gICAgcmV0dXJuIGR0O1xyXG4gIC8vfTtcclxufVxyXG5EYXRhVHlwZS5wcm90b3R5cGUuXyR0eXBlTmFtZSA9IFwiRGF0YVR5cGVcIjtcclxuRXJyb3JbJ3gnXSA9IERhdGFUeXBlLl9yZXNldENvbnN0YW50cygpO1xyXG5FcnJvclsneCddID0gRGF0YVR5cGUucmVzb2x2ZVN5bWJvbHMoKTtcclxuRXJyb3JbJ3gnXSA9IERhdGFUeXBlLmdldFN5bWJvbHMoKS5mb3JFYWNoKChzeW06IERhdGFUeXBlKSA9PiBzeW0udmFsaWRhdG9yQ3RvciA9IGdldFZhbGlkYXRvckN0b3Ioc3ltKSk7XHJcblxyXG4vLyBwcml2YXRlIGZ1bmN0aW9ucztcclxuXHJcblxyXG5mdW5jdGlvbiBnZXRWYWxpZGF0b3JDdG9yKGRhdGFUeXBlOiBEYXRhVHlwZSkge1xyXG4gIHN3aXRjaCAoZGF0YVR5cGUpIHtcclxuICAgIGNhc2UgRGF0YVR5cGUuU3RyaW5nOlxyXG4gICAgICByZXR1cm4gVmFsaWRhdG9yLnN0cmluZztcclxuICAgIGNhc2UgRGF0YVR5cGUuSW50NjQ6XHJcbiAgICAgIHJldHVybiBWYWxpZGF0b3IuaW50NjQ7XHJcbiAgICBjYXNlIERhdGFUeXBlLkludDMyOlxyXG4gICAgICByZXR1cm4gVmFsaWRhdG9yLmludDMyO1xyXG4gICAgY2FzZSBEYXRhVHlwZS5JbnQxNjpcclxuICAgICAgcmV0dXJuIFZhbGlkYXRvci5pbnQxNjtcclxuICAgIGNhc2UgRGF0YVR5cGUuRGVjaW1hbDpcclxuICAgICAgcmV0dXJuIFZhbGlkYXRvci5udW1iZXI7XHJcbiAgICBjYXNlIERhdGFUeXBlLkRvdWJsZTpcclxuICAgICAgcmV0dXJuIFZhbGlkYXRvci5udW1iZXI7XHJcbiAgICBjYXNlIERhdGFUeXBlLlNpbmdsZTpcclxuICAgICAgcmV0dXJuIFZhbGlkYXRvci5udW1iZXI7XHJcbiAgICBjYXNlIERhdGFUeXBlLkRhdGVUaW1lOlxyXG4gICAgICByZXR1cm4gVmFsaWRhdG9yLmRhdGU7XHJcbiAgICBjYXNlIERhdGFUeXBlLkRhdGVUaW1lT2Zmc2V0OlxyXG4gICAgICByZXR1cm4gVmFsaWRhdG9yLmRhdGU7XHJcbiAgICBjYXNlIERhdGFUeXBlLkJvb2xlYW46XHJcbiAgICAgIHJldHVybiBWYWxpZGF0b3IuYm9vbDtcclxuICAgIGNhc2UgRGF0YVR5cGUuR3VpZDpcclxuICAgICAgcmV0dXJuIFZhbGlkYXRvci5ndWlkO1xyXG4gICAgY2FzZSBEYXRhVHlwZS5CeXRlOlxyXG4gICAgICByZXR1cm4gVmFsaWRhdG9yLmJ5dGU7XHJcbiAgICBjYXNlIERhdGFUeXBlLkJpbmFyeTpcclxuICAgICAgLy8gVE9ETzogZG9uJ3QgcXVpdGUga25vdyBob3cgdG8gdmFsaWRhdGUgdGhpcyB5ZXQuXHJcbiAgICAgIHJldHVybiBWYWxpZGF0b3Iubm9uZTtcclxuICAgIGNhc2UgRGF0YVR5cGUuVGltZTpcclxuICAgICAgcmV0dXJuIFZhbGlkYXRvci5kdXJhdGlvbjtcclxuICAgIGNhc2UgRGF0YVR5cGUuVW5kZWZpbmVkOlxyXG4gICAgICByZXR1cm4gVmFsaWRhdG9yLm5vbmU7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXROZXh0U3RyaW5nKCkge1xyXG4gIHJldHVybiBEYXRhVHlwZS5jb25zdGFudHMuc3RyaW5nUHJlZml4ICsgZ2V0TmV4dE51bWJlcigpLnRvU3RyaW5nKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE5leHROdW1iZXIoKSB7XHJcbiAgbGV0IHJlc3VsdCA9IERhdGFUeXBlLmNvbnN0YW50cy5uZXh0TnVtYmVyO1xyXG4gIERhdGFUeXBlLmNvbnN0YW50cy5uZXh0TnVtYmVyICs9IERhdGFUeXBlLmNvbnN0YW50cy5uZXh0TnVtYmVySW5jcmVtZW50O1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE5leHRHdWlkKCkge1xyXG4gIHJldHVybiBjb3JlLmdldFV1aWQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0TmV4dERhdGVUaW1lKCkge1xyXG4gIHJldHVybiBuZXcgRGF0ZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDb25jdXJyZW5jeURhdGVUaW1lKHZhbDogYW55KSB7XHJcbiAgLy8gdXNlIHRoZSBjdXJyZW50IGRhdGV0aW1lIGJ1dCBpbnN1cmUgdGhhdCBpdCBpcyBkaWZmZXJlbnQgZnJvbSBwcmV2aW91cyBjYWxsLlxyXG4gIGxldCBkdCA9IG5ldyBEYXRlKCk7XHJcbiAgbGV0IGR0MiA9IG5ldyBEYXRlKCk7XHJcbiAgd2hpbGUgKGR0LmdldFRpbWUoKSA9PT0gZHQyLmdldFRpbWUoKSkge1xyXG4gICAgZHQyID0gbmV3IERhdGUoKTtcclxuICB9XHJcbiAgcmV0dXJuIGR0MjtcclxufVxyXG5cclxuZnVuY3Rpb24gY29lcmNlVG9TdHJpbmcoc291cmNlOiBhbnksIHNvdXJjZVR5cGVOYW1lPzogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIChzb3VyY2UgPT0gbnVsbCkgPyBzb3VyY2UgOiBzb3VyY2UudG9TdHJpbmcoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29lcmNlVG9HdWlkKHNvdXJjZTogYW55LCBzb3VyY2VUeXBlTmFtZTogc3RyaW5nKSB7XHJcbiAgaWYgKHNvdXJjZVR5cGVOYW1lID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICByZXR1cm4gc291cmNlLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG4gIH1cclxuICByZXR1cm4gc291cmNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjb2VyY2VUb0ludChzb3VyY2U6IGFueSwgc291cmNlVHlwZU5hbWU6IHN0cmluZykge1xyXG4gIGlmIChzb3VyY2VUeXBlTmFtZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgbGV0IHNyYyA9IHNvdXJjZS50cmltKCk7XHJcbiAgICBpZiAoc3JjID09PSBcIlwiKSByZXR1cm4gbnVsbDtcclxuICAgIGxldCB2YWwgPSBwYXJzZUludChzcmMsIDEwKTtcclxuICAgIHJldHVybiBpc05hTih2YWwpID8gc291cmNlIDogdmFsO1xyXG4gIH0gZWxzZSBpZiAoc291cmNlVHlwZU5hbWUgPT09IFwibnVtYmVyXCIpIHtcclxuICAgIHJldHVybiBNYXRoLnJvdW5kKHNvdXJjZSk7XHJcbiAgfVxyXG4gIC8vIGRvIHdlIHdhbnQgdG8gY29lcmNlIGZsb2F0cyAtPiBpbnRzXHJcbiAgcmV0dXJuIHNvdXJjZTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29lcmNlVG9GbG9hdChzb3VyY2U6IGFueSwgc291cmNlVHlwZU5hbWU6IHN0cmluZykge1xyXG4gIGlmIChzb3VyY2VUeXBlTmFtZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgbGV0IHNyYyA9IHNvdXJjZS50cmltKCk7XHJcbiAgICBpZiAoc3JjID09PSBcIlwiKSByZXR1cm4gbnVsbDtcclxuICAgIGxldCB2YWwgPSBwYXJzZUZsb2F0KHNyYyk7XHJcbiAgICByZXR1cm4gaXNOYU4odmFsKSA/IHNvdXJjZSA6IHZhbDtcclxuICB9XHJcbiAgcmV0dXJuIHNvdXJjZTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29lcmNlVG9EYXRlKHNvdXJjZTogYW55LCBzb3VyY2VUeXBlTmFtZTogc3RyaW5nKSB7XHJcbiAgbGV0IHZhbDogYW55O1xyXG4gIGlmIChzb3VyY2VUeXBlTmFtZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgbGV0IHNyYyA9IHNvdXJjZS50cmltKCk7XHJcbiAgICBpZiAoc3JjID09PSBcIlwiKSByZXR1cm4gbnVsbDtcclxuICAgIHZhbCA9IG5ldyBEYXRlKERhdGUucGFyc2Uoc3JjKSk7XHJcbiAgICByZXR1cm4gY29yZS5pc0RhdGUodmFsKSA/IHZhbCA6IHNvdXJjZTtcclxuICB9IGVsc2UgaWYgKHNvdXJjZVR5cGVOYW1lID09PSBcIm51bWJlclwiKSB7XHJcbiAgICB2YWwgPSBuZXcgRGF0ZShzb3VyY2UpO1xyXG4gICAgcmV0dXJuIGNvcmUuaXNEYXRlKHZhbCkgPyB2YWwgOiBzb3VyY2U7XHJcbiAgfVxyXG4gIHJldHVybiBzb3VyY2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvZXJjZVRvQm9vbChzb3VyY2U6IGFueSwgc291cmNlVHlwZU5hbWU6IHN0cmluZykge1xyXG4gIGlmIChzb3VyY2VUeXBlTmFtZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgbGV0IHNyYyA9IHNvdXJjZS50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuICAgIGlmIChzcmMgPT09IFwiZmFsc2VcIiB8fCBzcmMgPT09IFwiXCIpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSBlbHNlIGlmIChzcmMgPT09IFwidHJ1ZVwiKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHNvdXJjZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZm10U3RyaW5nKHZhbDogYW55KSB7XHJcbiAgcmV0dXJuIHZhbCA9PSBudWxsID8gbnVsbCA6IFwiJ1wiICsgdmFsLnJlcGxhY2UoLycvZywgXCInJ1wiKSArIFwiJ1wiO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmbXRJbnQodmFsOiBhbnkpIHtcclxuICByZXR1cm4gdmFsID09IG51bGwgPyBudWxsIDogKCh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiKSA/IHBhcnNlSW50KHZhbCwgMTApIDogdmFsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUZsb2F0Rm10KGZtdFN1ZmZpeDogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uICh2YWw6IGFueSkge1xyXG4gICAgaWYgKHZhbCA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuICAgIGlmICh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgIHZhbCA9IHBhcnNlRmxvYXQodmFsKTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWwgKyBmbXRTdWZmaXg7XHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gZm10RGF0ZVRpbWUodmFsOiBEYXRlKSB7XHJcbiAgaWYgKHZhbCA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIFwiZGF0ZXRpbWUnXCIgKyB2YWwudG9JU09TdHJpbmcoKSArIFwiJ1wiO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIHRocm93RXJyb3IoXCInJTEnIGlzIG5vdCBhIHZhbGlkIGRhdGVUaW1lXCIsIHZhbCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBmbXREYXRlVGltZU9mZnNldCh2YWw6IERhdGUpIHtcclxuICBpZiAodmFsID09IG51bGwpIHJldHVybiBudWxsO1xyXG4gIHRyeSB7XHJcbiAgICByZXR1cm4gXCJkYXRldGltZW9mZnNldCdcIiArIHZhbC50b0lTT1N0cmluZygpICsgXCInXCI7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgdGhyb3dFcnJvcihcIiclMScgaXMgbm90IGEgdmFsaWQgZGF0ZVRpbWVcIiwgdmFsKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZtdFRpbWUodmFsOiBhbnkpIHtcclxuICBpZiAodmFsID09IG51bGwpIHJldHVybiBudWxsO1xyXG4gIGlmICghY29yZS5pc0R1cmF0aW9uKHZhbCkpIHtcclxuICAgIHRocm93RXJyb3IoXCInJTEnIGlzIG5vdCBhIHZhbGlkIElTTyA4NjAxIGR1cmF0aW9uXCIsIHZhbCk7XHJcbiAgfVxyXG4gIHJldHVybiBcInRpbWUnXCIgKyB2YWwgKyBcIidcIjtcclxufVxyXG5cclxuZnVuY3Rpb24gZm10R3VpZCh2YWw6IGFueSkge1xyXG4gIGlmICh2YWwgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgaWYgKCFjb3JlLmlzR3VpZCh2YWwpKSB7XHJcbiAgICB0aHJvd0Vycm9yKFwiJyUxJyBpcyBub3QgYSB2YWxpZCBndWlkXCIsIHZhbCk7XHJcbiAgfVxyXG4gIHJldHVybiBcImd1aWQnXCIgKyB2YWwgKyBcIidcIjtcclxufVxyXG5cclxuZnVuY3Rpb24gZm10Qm9vbGVhbih2YWw6IGFueSkge1xyXG4gIGlmICh2YWwgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgaWYgKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIpIHtcclxuICAgIHJldHVybiB2YWwudHJpbSgpLnRvTG93ZXJDYXNlKCkgPT09IFwidHJ1ZVwiO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gISF2YWw7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBmbXRCaW5hcnkodmFsOiBhbnkpIHtcclxuICBpZiAodmFsID09IG51bGwpIHJldHVybiB2YWw7XHJcbiAgcmV0dXJuIFwiYmluYXJ5J1wiICsgdmFsICsgXCInXCI7XHJcbn1cclxuXHJcbi8vIFRPRE86IHVzZSBfX2lkZW50aXR5IGluc3RlYWQ7XHJcbmZ1bmN0aW9uIGZtdFVuZGVmaW5lZCh2YWw6IGFueSkge1xyXG4gIHJldHVybiB2YWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRocm93RXJyb3IobXNnOiBzdHJpbmcsIHZhbDogYW55KSB7XHJcbiAgbXNnID0gY29yZS5mb3JtYXRTdHJpbmcobXNnLCB2YWwpO1xyXG4gIHRocm93IG5ldyBFcnJvcihtc2cpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZVJhd0RhdGUodmFsOiBhbnkpIHtcclxuICBpZiAoIWNvcmUuaXNEYXRlKHZhbCkpIHtcclxuICAgIHZhbCA9IERhdGFUeXBlLnBhcnNlRGF0ZUZyb21TZXJ2ZXIodmFsKTtcclxuICB9XHJcbiAgcmV0dXJuIHZhbDtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VSYXdCaW5hcnkodmFsOiBhbnkpIHtcclxuICBpZiAodmFsICYmIHZhbC4kdmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgdmFsID0gdmFsLiR2YWx1ZTsgLy8gdGhpcyB3aWxsIGJlIGEgYnl0ZVtdIGVuY29kZWQgYXMgYSBzdHJpbmdcclxuICB9XHJcbiAgcmV0dXJuIHZhbDtcclxufVxyXG5cclxuLy9mdW5jdGlvbiBoYXNUaW1lWm9uZShzb3VyY2UpIHtcclxuLy8gIHZhciBpeCA9IHNvdXJjZS5pbmRleE9mKFwiVFwiKTtcclxuLy8gIHZhciB0aW1lUGFydCA9IHNvdXJjZS5zdWJzdHJpbmcoaXgrMSk7XHJcbi8vICByZXR1cm4gIHRpbWVQYXJ0LmluZGV4T2YoXCItXCIpID49IDAgfHwgdGltZVBhcnQuaW5kZXhPZihcIitcIikgPj0gMCB8fCB0aW1lUGFydC5pbmRleE9mKFwiWlwiKTtcclxuLy99XHJcblxyXG5cclxuIl19