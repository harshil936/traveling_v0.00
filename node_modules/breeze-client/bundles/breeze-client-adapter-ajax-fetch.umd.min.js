!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("breeze-client")):"function"==typeof define&&define.amd?define("breeze-client/adapter-ajax-fetch",["exports","breeze-client"],t):t(((e=e||self)["breeze-client"]=e["breeze-client"]||{},e["breeze-client"]["adapter-ajax-fetch"]={}),e["breeze-client"])}(this,(function(e,t){"use strict";var n=t.core,r=function(){function e(){this.name=e.adapterName,this.defaultSettings={},this.requestInterceptor=void 0}return e.register=function(n){return(n=n||t.config).registerAdapter("ajax",e),n.initializeAdapterInstance("ajax",e.adapterName,!0)},e.prototype.initialize=function(){},e.prototype.ajax=function(e){if(!fetch)throw new Error("fetch API not supported in this browser");var t={method:e.type,mode:"cors",cache:"no-cache",credentials:"include",headers:{"Content-Type":e.contentType||"application/json"},redirect:"follow",referrer:"client"};if("GET"!==e.type&&"HEAD"!==e.type){var r=e.data;"string"!=typeof r&&(r=JSON.stringify(r)),t.body=r}var a=e.url;if(!n.isEmpty(e.params)){var o=a.indexOf("?")>=0?"&":"?";a=a+o+function e(t){var n,r,i="";for(var a in t)if(t.hasOwnProperty(a)){var o=t[a];if(o instanceof Array)for(var s=0;s<o.length;++s)n=o[s],(r={})[a+"["+s+"]"]=n,i+=e(r)+"&";else if(o&&o.toISOString)i+=encodeURIComponent(a)+"="+encodeURIComponent(o.toISOString())+"&";else if(o instanceof Object)for(var c in o)t.hasOwnProperty(a)&&(n=o[c],(r={})[a+"["+c+"]"]=n,i+=e(r)+"&");else null===o?i+=encodeURIComponent(a)+"=&":void 0!==o&&(i+=encodeURIComponent(a)+"="+encodeURIComponent(o)+"&")}return i.length?i.substr(0,i.length-1):i}(e.params)}if(!n.isEmpty(this.defaultSettings)){var s=n.extend({},this.defaultSettings);t=n.extend(s,t);var c=n.extend({},this.defaultSettings.headers);t.headers=n.extend(c,t.headers)}var f={adapter:this,config:t,dsaConfig:e,success:function(t,n,r){var a={config:e,data:t,getHeaders:i(r),status:r.status,statusText:n};e.success(a)},error:function(t,n,r,a,o){var s={config:e,data:r,error:o||n,getHeaders:i(a),status:t,statusText:n};e.error(s)}};if(n.isFunction(this.requestInterceptor)){var u=this.requestInterceptor;u(f),u.oneTime&&(this.requestInterceptor=void 0)}f.config&&fetch(a,f.config).then((function(e){e.ok?e.json().then((function(t){f.success(t,e.statusText,e)})):e.text().then((function(t){f.error(e.status,e.statusText,t,e,null)}))})).catch((function(e){f.error(0,e&&e.message||e,null,null,e)}))},e.adapterName="fetch",e}();function i(e){return e&&0!==e.status?function(t){if(t&&t.length>0)return e.headers.get(t);var n={};return e.headers.forEach((function(e,t){n[t]=e})),n}:function(e){return e&&e.length>0?"":{}}}t.config.registerAdapter("ajax",r),e.AjaxFetchAdapter=r,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=breeze-client-adapter-ajax-fetch.umd.min.js.map