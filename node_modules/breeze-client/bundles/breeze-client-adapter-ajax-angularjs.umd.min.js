!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("breeze-client")):"function"==typeof define&&define.amd?define("breeze-client/adapter-ajax-angularjs",["exports","breeze-client"],t):t(((e=e||self)["breeze-client"]=e["breeze-client"]||{},e["breeze-client"]["adapter-ajax-angularjs"]={}),e["breeze-client"])}(this,(function(e,t){"use strict";var r=t.core,n=function(){function e(){this.name="angularjs",this.defaultSettings={},this.requestInterceptor=void 0}return e.register=function(r){return(r=r||t.config).registerAdapter("ajax",e),r.initializeAdapterInstance("ajax","angularjs",!0)},e.prototype.initialize=function(){var e,r,n=t.core.requireLib("angular");n&&(n.injector(["ng"]).invoke(["$http","$rootScope",function(t,n){e=t,r=n}]),this.$http=e,this.$rootScope=r)},e.prototype.setHttp=function(e){this.$http=e,this.$rootScope=null},e.prototype.ajax=function(e){if(!this.$http)throw new Error("Unable to locate angularjs for ajax adapter");var t={method:e.type,url:e.url,dataType:e.dataType,contentType:e.contentType,crossDomain:e.crossDomain,headers:e.headers||{},data:void 0};if(e.params){var n=t.url.indexOf("?")>=0?"&":"?";t.url=t.url+n+function e(t){var r,n,o="";for(var a in t){var s=t[a];if(s instanceof Array)for(var i=0;i<s.length;++i)r=s[i],(n={})[a+"["+i+"]"]=r,o+=e(n)+"&";else if(s&&s.toISOString)o+=encodeURIComponent(a)+"="+encodeURIComponent(s.toISOString())+"&";else if(s instanceof Object)for(var c in s)r=s[c],(n={})[a+"["+c+"]"]=r,o+=e(n)+"&";else null===s?o+=encodeURIComponent(a)+"=&":void 0!==s&&(o+=encodeURIComponent(a)+"="+encodeURIComponent(s)+"&")}return o.length?o.substr(0,o.length-1):o}(e.params)}if(e.data&&(t.data=e.data),!r.isEmpty(this.defaultSettings)){var o=r.extend({},this.defaultSettings);t=r.extend(o,t);var a=r.extend({},this.defaultSettings.headers);t.headers=r.extend(a,t.headers)}var s={adapter:this,config:t,dsaConfig:e,success:u,error:d,responseSuccess:function(e){return u(e.data,e.status,e.headers,e.config,e.statusText)},responseError:function(e){return d(e.data,e.status,e.headers,e.config,e.statusText)}};if(r.isFunction(this.requestInterceptor)){var i=this.requestInterceptor;i(s),i.oneTime&&(this.requestInterceptor=void 0)}if(s.config){var c=this.$http(s.config);c.success?c.success(s.success).error(s.error):c.then(s.responseSuccess).catch(s.responseError),this.$rootScope&&this.$rootScope.$digest()}function u(t,r,n,o,a){"null"===t&&(t=null);var s={config:e,data:t,getHeaders:n,ngConfig:o,status:r,statusText:a};e.success(s)}function d(t,r,n,o,a){0===r&&null==t&&(t="timeout");var s={config:e,data:t,getHeaders:n,ngConfig:o,status:r,statusText:a};e.error(s)}},e}();t.config.registerAdapter("ajax",n),e.AjaxAngularjsAdapter=n,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=breeze-client-adapter-ajax-angularjs.umd.min.js.map