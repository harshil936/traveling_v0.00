!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common/http"),require("breeze-client"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("breeze-client/adapter-ajax-httpclient",["exports","@angular/common/http","breeze-client","rxjs/operators"],t):t(((e=e||self)["breeze-client"]=e["breeze-client"]||{},e["breeze-client"]["adapter-ajax-httpclient"]={}),e.ng.common.http,e["breeze-client"],e.rxjs.operators)}(this,(function(e,t,r,n){"use strict";var s=function(){function e(t){this.http=t,this.name=e.adapterName,this.defaultSettings={}}return e.register=function(t,n){return(n=n||r.config).registerAdapter("ajax",(function(){return new e(t)})),n.initializeAdapterInstance("ajax",e.adapterName,!0)},e.prototype.initialize=function(){},e.prototype.ajax=function(e){if(!this.http)throw new Error("Unable to locate angular http module for ajax adapter");if(!r.core.isEmpty(this.defaultSettings)){var s=r.core.extend({},this.defaultSettings);e=r.core.extend(s,e);var a=r.core.extend({},this.defaultSettings.headers);e.headers=r.core.extend(a,e.headers)}if(e.crossDomain)throw new Error(this.name+" does not support JSONP (crossDomain) requests");var i=e.url;if(!r.core.isEmpty(e.params)){var p=i.indexOf("?")>=0?"&":"?";i=i+p+function e(t){var r,n,s="";for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];if(a instanceof Array)for(var i=0;i<a.length;++i)r=a[i],(n={})[o+"["+i+"]"]=r,s+=e(n)+"&";else if(a&&a.toISOString)s+=encodeURIComponent(o)+"="+encodeURIComponent(a.toISOString())+"&";else if(a instanceof Object)for(var p in a)t.hasOwnProperty(o)&&(r=a[p],(n={})[o+"["+p+"]"]=r,s+=e(n)+"&");else null===a?s+=encodeURIComponent(o)+"=&":void 0!==a&&(s+=encodeURIComponent(o)+"="+encodeURIComponent(a)+"&")}return s.length?s.substr(0,s.length-1):s}(e.params)}var u=new t.HttpHeaders(e.headers||{});u.has("Content-Type")||"GET"!==e.type&&"DELETE"!==e.type&&e.contentType&&(u=u.set("Content-Type",e.contentType||"application/json; charset=utf-8"));var c=e.data,f={adapter:this,request:new t.HttpRequest((e.type||"GET").toUpperCase(),i,c,{headers:u,responseType:"text"}),dsaConfig:e,success:function(t){if(t.response.status<200||t.response.status>=300)throw{data:t.data,response:t.response};var r={config:f.request,data:t.data,getHeaders:o(t.response.headers),status:t.response.status};r.ngConfig=f.request,r.statusText=t.response.statusText,r.response=t.response,e.success(r)},error:function(r){if(r instanceof Error)throw r;var n=void 0;n=r.error instanceof t.HttpResponse?r.error.body:r.error instanceof Error?r.error.message:r.error,0===r.status&&null==n&&(n="timeout");var s=r.status+": "+r.statusText;n&&"object"==typeof n&&(n.message=n.message||s),n||(n=s);var a={config:f.request,data:n,getHeaders:o(r.headers),status:r.status};a.ngConfig=f.request,a.statusText=r.statusText,a.response=r,e.error(a)}};if(r.core.isFunction(this.requestInterceptor)&&(this.requestInterceptor(f),this.requestInterceptor.oneTime&&(this.requestInterceptor=null)),f.request){var d=n.filter((function(e){return e instanceof t.HttpResponse}));n.map((function(e){var t,r=e,n=f.dsaConfig.dataType;t=n&&"json"!==n?r.body:JSON.parse(r.body);return{data:t,response:r}}))(d(this.http.request(f.request))).forEach(f.success).catch(f.error)}},e.adapterName="httpclient",e}();function o(e){return function(t){return e.getAll(t).join("\r\n")}}e.AjaxHttpClientAdapter=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=breeze-client-adapter-ajax-httpclient.umd.min.js.map