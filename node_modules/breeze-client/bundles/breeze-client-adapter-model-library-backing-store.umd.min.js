!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("breeze-client")):"function"==typeof define&&define.amd?define("breeze-client/adapter-model-library-backing-store",["exports","breeze-client"],t):t(((e=e||self)["breeze-client"]=e["breeze-client"]||{},e["breeze-client"]["adapter-model-library-backing-store"]={}),e["breeze-client"])}(this,(function(e,t){"use strict";var r=t.core,n=function(){function e(){this.name="backingStore"}return e.register=function(r){return(r=r||t.config).registerAdapter("modelLibrary",e),r.initializeAdapterInstance("modelLibrary","backingStore",!0)},e.prototype.initialize=function(){},e.prototype.getTrackablePropertyNames=function(e){var t=[];for(var n in e)if("entityAspect"!==n&&"entityType"!==n&&"_$typeName"!==n&&"_pendingSets"!==n&&"_backingStore"!==n){var i=e[n];r.isFunction(i)||t.push(n)}return t},e.prototype.initializeEntityPrototype=function(e){e.getProperty=function(e){return this[e]},e.setProperty=function(e,t){return this[e]=t,this},function(e){var t=e.entityType||e.complexType,r=t._extra,n=r.alreadyWrappedProps||{};t.getProperties().forEach((function(t){var r,o=t.name;n[o]||(null!=(r=o in e?function e(t,r){if(!t.hasOwnProperty(r.name)){var n=Object.getPrototypeOf(t);return e(n,r)}var i=Object.getOwnPropertyDescriptor(t,r.name);if(!i)return;if(!i.configurable)return;if(i.value)return;if(!i.set)return;var o={get:function(){if(i)return i.get.bind(this)()},set:function(e){var t;this._$interceptor(r,e,(t=this,function(){if(i){if(0===arguments.length)return i.get.bind(t)();var e=i.set,r=e.rawSet||e;r.bind(t)(arguments[0])}}))},enumerable:i.enumerable,configurable:!0};return o.set.rawSet=i.set,o}(e,t):i(e,t))&&Object.defineProperty(e,o,r),n[o]=!0)})),r.alreadyWrappedProps=n}(e)},e.prototype.startTracking=function(e,n){var o=function(e){var t=a(e),n=Object.getPrototypeOf(e);return(n.entityType||n.complexType).getProperties().forEach((function(t){var o=t.name;if(t.isUnmapped&&!r.getPropertyDescriptor(n,o)){var a=i(n,t);Object.defineProperty(n,o,a)}if(e.hasOwnProperty(o)){var c=e[o];delete e[o],e[o]=c}})),t}(e);(t.EntityAspect.isEntity(e)?e.entityType:e.complexType).getProperties().forEach((function(r){var n=r.name,i=e[n];if(r instanceof t.DataProperty)r.isComplexProperty?i=r.isScalar?r.dataType._createInstanceCore(e,r):t.makeComplexArray([],e,r):r.isScalar?void 0===i&&(i=r.defaultValue):i=t.makePrimitiveArray([],e,r);else{if(!r.isNavigationProperty)throw new Error("unknown property: "+n);if(null!=i)throw new Error("Cannot assign a navigation property in an entity ctor.: "+n);i=r.isScalar?null:t.makeRelationArray([],e,r)}(r.isSettable||r.isNavigationProperty)&&(o[n]=i)}))},e}();function i(e,t){var r=t.name,n=e._pendingBackingStores;n||(n=[],e._pendingBackingStores=n);var i={get:function(){return(this._backingStore||a(this))[r]},set:function(e){var n=o(this._backingStore||c(this),r);this._$interceptor(t,e,n)},enumerable:!0,configurable:!0};return i.set.rawSet=function(e){o(this._backingStore||c(this),r)(e)},i}function o(e,t){return function(){return 0===arguments.length?e[t]:void(e[t]=arguments[0])}}function a(e){!function(e){var t=e._pendingBackingStores;t&&(t.forEach((function(e){e.entity._backingStore=e.backingStore})),t.length=0)}(Object.getPrototypeOf(e));var t=e._backingStore;return t||(t={},e._backingStore=t),t}function c(e){var t=Object.getPrototypeOf(e)._pendingBackingStores,n=r.arrayFirst(t,(function(t){return t.entity===e}));if(n)return n.backingStore;var i={};return t.push({entity:e,backingStore:i}),i}t.config.registerAdapter("modelLibrary",n),e.ModelLibraryBackingStoreAdapter=n,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=breeze-client-adapter-model-library-backing-store.umd.min.js.map